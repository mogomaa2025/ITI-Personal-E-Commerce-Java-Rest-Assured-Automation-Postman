{
	"info": {
		"_postman_id": "d78288eb-bbb2-4f66-83f6-9554e6272094",
		"name": "ITI E-Commerce API Online V30",
		"description": "Postman collection covering the E-Commerce backend API.  \nITI Graduation Project\n\nEng. Mohamed Ahmed Gomaa\n\nEng. Reham",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48753250",
		"_collection_link": "https://mohamedgomaa31996-5206709.postman.co/workspace/Mohamed-Gomaa's-Workspace~a3193fac-9085-4e3d-8993-53d2aa4802b7/collection/48753250-d78288eb-bbb2-4f66-83f6-9554e6272094?action=share&source=collection_link&creator=48753250"
	},
	"item": [
		{
			"name": "System",
			"item": [
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Health Check\r",
									"pm.test(\"Status code is 200 : Health Check\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (API running)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: API health check successful\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"API is running\");\r",
									"        pm.expect(responseData).to.have.property(\"timestamp\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // Performance test\r",
									"    pm.test(\"Performance: Response time is under 500ms\", function () {\r",
									"        pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status codes\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "``` json\n{\n    \"message\": \"API is running\",\n    \"success\": true,\n    \"timestamp\": \"2025-10-15T18:46:27.429317\"\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "System Health Summary",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : System Health\r",
									"pm.test(\"Status code is 200 : System Health\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (System health OK)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: System health report valid\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"status\", \"healthy\");\r",
									"        pm.expect(responseData).to.have.property(\"timestamp\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // Data files check\r",
									"        pm.expect(responseData).to.have.property(\"data_files\");\r",
									"        let files = responseData.data_files;\r",
									"        pm.expect(files).to.be.an(\"object\");\r",
									"\r",
									"        // Every data file should be \"ok\"\r",
									"        Object.keys(files).forEach(f => {\r",
									"            pm.expect(files[f]).to.eql(\"ok\");\r",
									"        });\r",
									"\r",
									"        // Metrics check\r",
									"        pm.expect(responseData).to.have.property(\"metrics\");\r",
									"        let metrics = responseData.metrics;\r",
									"\r",
									"        pm.expect(metrics).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"        pm.expect(metrics).to.have.property(\"total_products\").that.is.a(\"number\");\r",
									"        pm.expect(metrics).to.have.property(\"total_users\").that.is.a(\"number\");\r",
									"    });\r",
									"\r",
									"    // Performance test\r",
									"    pm.test(\"Performance: Response time is under 500ms\", function () {\r",
									"        pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status codes\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/system/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"system",
								"health"
							]
						},
						"description": "``` json\n{\n    \"data_files\": {\n        \"analytics.json\": \"ok\",\n        \"cart.json\": \"ok\",\n        \"categories.json\": \"ok\",\n        \"contact_messages.json\": \"ok\",\n        \"coupons.json\": \"ok\",\n        \"help.json\": \"ok\",\n        \"notifications.json\": \"ok\",\n        \"orders.json\": \"ok\",\n        \"products.json\": \"ok\",\n        \"reviews.json\": \"ok\",\n        \"users.json\": \"ok\",\n        \"wishlist.json\": \"ok\"\n    },\n    \"metrics\": {\n        \"total_orders\": 62,\n        \"total_products\": 83,\n        \"total_users\": 48\n    },\n    \"status\": \"healthy\",\n    \"success\": true,\n    \"timestamp\": \"2025-10-15T18:49:11.558629\"\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "API Documentation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get API Documentation\r",
									"pm.test(\"Status code is 200 : Get API Documentation\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (docs retrieved successfully)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: API documentation retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"title\", \"E-Commerce API Documentation\");\r",
									"        pm.expect(responseData).to.have.property(\"version\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"description\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"base_url\").that.is.a(\"string\").and.match(/^http/);\r",
									"        pm.expect(responseData).to.have.property(\"total_endpoints\").that.is.a(\"number\").and.above(0);\r",
									"\r",
									"        // endpoints structure check\r",
									"        pm.expect(responseData).to.have.property(\"endpoints\").that.is.an(\"object\");\r",
									"        let endpoints = responseData.endpoints;\r",
									"        pm.expect(Object.keys(endpoints).length).to.be.above(0);\r",
									"\r",
									"        // features list check\r",
									"        pm.expect(responseData).to.have.property(\"features\").that.is.an(\"array\").and.not.empty;\r",
									"        pm.expect(responseData.features[0]).to.be.a(\"string\");\r",
									"\r",
									"        // Check system endpoints presence\r",
									"        pm.expect(endpoints).to.have.property(\"system\");\r",
									"        pm.expect(endpoints.system).to.have.property(\"GET /api/docs\", \"API documentation\");\r",
									"        pm.expect(endpoints.system).to.have.property(\"GET /api/health\");\r",
									"        pm.expect(endpoints.system).to.have.property(\"GET /api/system/health\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle any unexpected code\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/docs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"docs"
							]
						},
						"description": "``` json\n{\n    \"base_url\": \"https://itigraduation.pythonanywhere.com/api\",\n    \"description\": \"Comprehensive e-commerce API with advanced features\",\n    \"endpoints\": {\n        \"admin\": {\n            \"GET /api/export/orders\": \"Export orders\",\n            \"GET /api/export/products\": \"Export products\",\n            \"GET /api/inventory/low-stock\": \"Get low stock products\",\n            \"GET /api/stats\": \"Get dashboard statistics\",\n            \"GET /api/users/{id}/activity\": \"Get user activity\",\n            \"PUT /api/inventory/update-stock\": \"Update product stock\",\n            \"PUT /api/products/bulk-update\": \"Bulk update products\"\n        },\n        \"analytics\": {\n            \"GET /api/analytics/dashboard\": \"Get dashboard analytics (Admin)\",\n            \"GET /api/analytics/reports/sales\": \"Get sales report (Admin)\"\n        },\n        \"authentication\": {\n            \"POST /api/login\": \"User login\",\n            \"POST /api/register\": \"Register a new user\"\n        },\n        \"blog\": {\n            \"GET /api/blog/posts\": \"Get blog posts\",\n            \"GET /api/blog/posts/{id}\": \"Get blog post\"\n        },\n        \"cart\": {\n            \"DELETE /api/cart\": \"Clear cart\",\n            \"DELETE /api/cart/items/{id}\": \"Remove from cart\",\n            \"GET /api/cart\": \"Get user cart\",\n            \"POST /api/cart/items\": \"Add item to cart\",\n            \"PUT /api/cart/items/{id}\": \"Update cart item\"\n        },\n        \"contact\": {\n            \"GET /api/contact/messages\": \"Get contact messages (Admin)\",\n            \"POST /api/contact\": \"Submit contact message\",\n            \"POST /api/contact/messages/{id}/respond\": \"Respond to message (Admin)\"\n        },\n        \"coupons\": {\n            \"GET /api/coupons\": \"Get available coupons\",\n            \"POST /api/coupons\": \"Create coupon (Admin)\",\n            \"POST /api/coupons/validate\": \"Validate coupon code\"\n        },\n        \"help\": {\n            \"GET /api/help\": \"Get help articles\",\n            \"GET /api/help/categories\": \"Get help categories\",\n            \"GET /api/help/{id}\": \"Get help article\",\n            \"POST /api/help\": \"Create help article (Admin)\",\n            \"POST /api/help/{id}/helpful\": \"Mark article helpful\",\n            \"PUT /api/help/{id}\": \"Update help article (Admin)\"\n        },\n        \"notifications\": {\n            \"GET /api/notifications\": \"Get user notifications\",\n            \"PUT /api/notifications/read-all\": \"Mark all notifications as read\",\n            \"PUT /api/notifications/{id}/read\": \"Mark notification as read\"\n        },\n        \"orders\": {\n            \"DELETE /api/orders/{id}\": \"Cancel order\",\n            \"GET /api/orders\": \"Get user orders\",\n            \"GET /api/orders/status/{status}\": \"Get orders by status\",\n            \"GET /api/orders/{id}\": \"Get order by ID\",\n            \"POST /api/orders\": \"Create order\",\n            \"PUT /api/orders/{id}/status\": \"Update order status (Admin)\"\n        },\n        \"products\": {\n            \"DELETE /api/products/{id}\": \"Delete product (Admin)\",\n            \"GET /api/products\": \"Get all products with filtering\",\n            \"GET /api/products/category/{category}\": \"Get products by category\",\n            \"GET /api/products/search\": \"Search products\",\n            \"GET /api/products/{id}\": \"Get product by ID\",\n            \"POST /api/products\": \"Create product (Admin)\",\n            \"PUT /api/products/{id}\": \"Update product (Admin)\"\n        },\n        \"recommendations\": {\n            \"GET /api/recommendations/user/{id}\": \"Get user recommendations\",\n            \"GET /api/recommendations/{id}\": \"Get product recommendations\"\n        },\n        \"reviews\": {\n            \"GET /api/products/{id}/reviews\": \"Get product reviews\",\n            \"POST /api/reviews\": \"Create product review\"\n        },\n        \"search\": {\n            \"GET /api/search/advanced\": \"Advanced product search\"\n        },\n        \"system\": {\n            \"GET /api/docs\": \"API documentation\",\n            \"GET /api/health\": \"Health check\",\n            \"GET /api/system/health\": \"System health status\"\n        },\n        \"users\": {\n            \"DELETE /api/users/{id}\": \"Delete user (Admin)\",\n            \"GET /api/users\": \"Get all users (Admin)\",\n            \"GET /api/users/{id}\": \"Get user by ID\",\n            \"PUT /api/users/{id}\": \"Update user information\"\n        },\n        \"wishlist\": {\n            \"DELETE /api/wishlist/{id}\": \"Remove from wishlist\",\n            \"GET /api/wishlist\": \"Get user wishlist\",\n            \"POST /api/wishlist\": \"Add to wishlist\"\n        }\n    },\n    \"features\": [\n        \"User Authentication & Management\",\n        \"Product Catalog & Inventory\",\n        \"Shopping Cart & Orders\",\n        \"Reviews & Ratings\",\n        \"Help & FAQ System\",\n        \"Contact Management\",\n        \"Wishlist Functionality\",\n        \"Coupon & Discount System\",\n        \"Notification System\",\n        \"Analytics & Reporting\",\n        \"Advanced Search\",\n        \"Product Recommendations\",\n        \"Blog & Content Management\",\n        \"Admin Dashboard\",\n        \"Bulk Operations\",\n        \"Data Export\",\n        \"System Monitoring\"\n    ],\n    \"success\": true,\n    \"title\": \"E-Commerce API Documentation\",\n    \"total_endpoints\": 61,\n    \"version\": \"2.0\"\n}\n\n ```"
					},
					"response": []
				}
			]
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Refresh Access Token [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Refresh Token\r",
									"pm.test(\"Status code is 200 : Refresh Token\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"// Handle 200 case (Token refreshed successfully)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Token refreshed successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Token refreshed successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"token\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // store the new admin_token using refresh-token\r",
									"        pm.collectionVariables.set(\"admin_token\", responseData.token);\r",
									"        console.log(\"admin token refreshed and saved:\", responseData.token);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status codes\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"{{refresh_admin_token}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"refresh"
							]
						},
						"description": "``` json\n{\n    \"message\": \"Login successful\",\n    \"success\": true,\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDAsImVtYWlsIjoiYWRtaW5AdGVzdC5jb20iLCJpc19hZG1pbiI6dHJ1ZSwiZXhwIjoxNzYwNjQyMzQ5fQ.jH9Htfvv4INCqm3fUScP__emSSw3FqNLfwYE02E6IVg\",\n    \"user\": {\n        \"email\": \"admin@test.com\",\n        \"id\": 40,\n        \"is_admin\": true,\n        \"name\": \"admin\"\n    }\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Register User",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generate a random email address\r",
									"let randomString = Math.random().toString(36).substring(2, 10);\r",
									"let randomEmail = `test_${randomString}@gmail.com`;\r",
									"\r",
									"// Store the email in collection variables\r",
									"pm.collectionVariables.set(\"email\", randomEmail);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201 : Register User\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse JSON\r",
									"let jsonValid = true;\r",
									"let responseData = {};\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"// Handle 201 created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: User registered successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Invalid JSON response\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"data\");\r",
									"        let data = responseData.data;\r",
									"\r",
									"        pm.expect(data).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        pm.expect(data).to.have.property(\"id\").that.is.a(\"number\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{email}}\",\n    \"password\": \"Gomaa@123\",\n    \"name\": \"test\",\n    \"is_admin\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"register"
							]
						},
						"description": "``` json\n{\n    \"data\": {\n        \"address\": \"\",\n        \"created_at\": \"2025-10-15T19:16:38.427726\",\n        \"email\": \"test_08cuju91@gmail.com\",\n        \"id\": 52,\n        \"is_admin\": false,\n        \"name\": \"test\",\n        \"phone\": \"\"\n    },\n    \"message\": \"User registered successfully\",\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Login\r",
									"pm.test(\"Status code is 200 : Login User\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (Login successful)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Login successful\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Login successful\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"token\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"refresh_token\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // Validate user object\r",
									"        pm.expect(responseData).to.have.property(\"user\");\r",
									"        let user = responseData.user;\r",
									"\r",
									"        pm.expect(user).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(user).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(user).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(user).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"\r",
									"        // Save tokens\r",
									"        pm.collectionVariables.set(\"user_token\", responseData.token);\r",
									"        pm.collectionVariables.set(\"refresh_token\", responseData.refresh_token);\r",
									"\r",
									"        console.log(\"User Token saved:\", responseData.token);\r",
									"        console.log(\"Refresh Token saved:\", responseData.refresh_token);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status codes\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{email}}\",\n    \"password\": \"Gomaa@123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login"
							]
						},
						"description": "``` json\n{\n    \"message\": \"Login successful\",\n    \"success\": true,\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NTIsImVtYWlsIjoidGVzdF8wOGN1anU5MUBnbWFpbC5jb20iLCJpc19hZG1pbiI6ZmFsc2UsImV4cCI6MTc2MDY0MjI0MH0.wdQTVOJoOKPOEgI9v2PTXLxXNFRAT1u1Mml-h7-nW68\",\n    \"user\": {\n        \"email\": \"test_08cuju91@gmail.com\",\n        \"id\": 52,\n        \"is_admin\": false,\n        \"name\": \"test\"\n    }\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Admin Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Admin Login\r",
									"pm.test(\"Status code is 200 : Admin Login\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (Admin login successful)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Admin login successful\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Login successful\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"token\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"refresh_token\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"user\");\r",
									"        let user = responseData.user;\r",
									"        pm.expect(user).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(user).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(user).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(user).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        pm.expect(user.is_admin).to.eql(true);\r",
									"\r",
									"        // Save tokens for admin\r",
									"        pm.collectionVariables.set(\"admin_token\", responseData.token);\r",
									"        pm.collectionVariables.set(\"refresh_admin_token\", responseData.refresh_token);\r",
									"\r",
									"        console.log(\"Admin Token saved:\", responseData.token);\r",
									"        console.log(\"Refresh Admin Token saved:\", responseData.refresh_token);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status codes\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"admin123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login"
							]
						},
						"description": "``` json\n{\n    \"message\": \"Login successful\",\n    \"success\": true,\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDAsImVtYWlsIjoiYWRtaW5AdGVzdC5jb20iLCJpc19hZG1pbiI6dHJ1ZSwiZXhwIjoxNzYwNjQyMzQ5fQ.jH9Htfvv4INCqm3fUScP__emSSw3FqNLfwYE02E6IVg\",\n    \"user\": {\n        \"email\": \"admin@test.com\",\n        \"id\": 40,\n        \"is_admin\": true,\n        \"name\": \"admin\"\n    }\n}\n\n ```"
					},
					"response": []
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "List Users (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200: users are listed\r",
									"pm.test(\"Status code is 200: users are listed\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (users listed)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: users listed and data valid\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"\r",
									"        // optional: check count exists and matches length\r",
									"        if (responseData.hasOwnProperty(\"count\")) {\r",
									"            pm.expect(responseData.count).to.be.a(\"number\");\r",
									"            pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"        }\r",
									"\r",
									"        // check at least one user object has required fields\r",
									"        if (responseData.data.length > 0) {\r",
									"            let sample = responseData.data[0];\r",
									"            pm.expect(sample).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(sample).to.have.property(\"email\").that.is.a(\"string\");\r",
									"            pm.expect(sample).to.have.property(\"name\").that.is.a(\"string\");\r",
									"            pm.expect(sample).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        } else {\r",
									"            pm.expect.fail(\"Expected at least one user in data array\");\r",
									"        }\r",
									"    });\r",
									"\r",
									"    // Save last user's id as collection variable\r",
									"    let dataArr = responseData.data;\r",
									"    let userID = Array.isArray(dataArr) && dataArr.length > 0 ? dataArr[dataArr.length - 1].id : undefined;\r",
									"    if (typeof userID !== \"undefined\") {\r",
									"        pm.collectionVariables.set(\"user_id\", userID);\r",
									"        console.log(\"Saved user_id:\", userID);\r",
									"    } else {\r",
									"        console.warn(\"No user_id to save (data array empty)\");\r",
									"    }\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						},
						"description": "``` json\n{\n    \"count\": 54,\n    \"data\": [\n        {\n            \"address\": \"226 Oak Ave, Indianapolis, CA 90001\",\n            \"created_at\": \"2025-02-14T00:17:15.199498\",\n            \"email\": \"user@test.com\",\n            \"id\": 2,\n            \"is_admin\": false,\n            \"name\": \"Test User\",\n            \"phone\": \"555-0101\"\n        },\n        {\n            \"address\": \"169 River Rd, Charlotte, FL 84469\",\n            \"created_at\": \"2025-01-05T00:17:15.199498\",\n            \"email\": \"charlotte.taylor495@email.com\",\n            \"id\": 3,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Taylor\",\n            \"phone\": \"555-4838\"\n        },\n        {\n            \"address\": \"174 Park Blvd, Houston, TX 15936\",\n            \"created_at\": \"2025-09-25T00:17:15.199498\",\n            \"email\": \"mia.miller610@email.com\",\n            \"id\": 4,\n            \"is_admin\": false,\n            \"name\": \"Mia Miller\",\n            \"phone\": \"555-7385\"\n        },\n        {\n            \"address\": \"700 Main St, San Antonio, CA 95466\",\n            \"created_at\": \"2024-11-15T00:17:15.199498\",\n            \"email\": \"emily.jackson5@email.com\",\n            \"id\": 5,\n            \"is_admin\": false,\n            \"name\": \"Emily Jackson\",\n            \"phone\": \"555-7018\"\n        },\n        {\n            \"address\": \"787 Cedar Ln, Phoenix, CA 22012\",\n            \"created_at\": \"2025-08-10T00:17:15.199498\",\n            \"email\": \"william.miller728@email.com\",\n            \"id\": 6,\n            \"is_admin\": false,\n            \"name\": \"William Miller\",\n            \"phone\": \"555-7602\"\n        },\n        {\n            \"address\": \"488 Washington St, Chicago, FL 95744\",\n            \"created_at\": \"2024-12-01T00:17:15.199498\",\n            \"email\": \"richard.martinez950@email.com\",\n            \"id\": 7,\n            \"is_admin\": false,\n            \"name\": \"Richard Martinez\",\n            \"phone\": \"555-6732\"\n        },\n        {\n            \"address\": \"880 Washington St, Seattle, FL 17234\",\n            \"created_at\": \"2025-07-10T00:17:15.199498\",\n            \"email\": \"matthew.taylor42@email.com\",\n            \"id\": 8,\n            \"is_admin\": false,\n            \"name\": \"Matthew Taylor\",\n            \"phone\": \"555-1734\"\n        },\n        {\n            \"address\": \"673 Sunset Blvd, Indianapolis, CA 34515\",\n            \"created_at\": \"2025-07-28T00:17:15.199498\",\n            \"email\": \"daniel.martinez992@email.com\",\n            \"id\": 9,\n            \"is_admin\": false,\n            \"name\": \"Daniel Martinez\",\n            \"phone\": \"555-2832\"\n        },\n        {\n            \"address\": \"799 Oak Ave, Phoenix, NY 27943\",\n            \"created_at\": \"2025-10-14T00:17:15.199498\",\n            \"email\": \"matthew.thomas596@email.com\",\n            \"id\": 10,\n            \"is_admin\": false,\n            \"name\": \"Matthew Thomas\",\n            \"phone\": \"555-1405\"\n        },\n        {\n            \"address\": \"394 Oak Ave, Indianapolis, NY 88148\",\n            \"created_at\": \"2025-04-08T00:17:15.200501\",\n            \"email\": \"mia.martin508@email.com\",\n            \"id\": 11,\n            \"is_admin\": false,\n            \"name\": \"Mia Martin\",\n            \"phone\": \"555-5703\"\n        },\n        {\n            \"address\": \"614 Lake View Dr, Columbus, CA 26095\",\n            \"created_at\": \"2025-04-04T00:17:15.200501\",\n            \"email\": \"emma.moore579@email.com\",\n            \"id\": 12,\n            \"is_admin\": false,\n            \"name\": \"Emma Moore\",\n            \"phone\": \"555-7607\"\n        },\n        {\n            \"address\": \"351 Maple Dr, San Francisco, CA 87181\",\n            \"created_at\": \"2025-06-21T00:17:15.200501\",\n            \"email\": \"emily.smith181@email.com\",\n            \"id\": 13,\n            \"is_admin\": false,\n            \"name\": \"Emily Smith\",\n            \"phone\": \"555-3436\"\n        },\n        {\n            \"address\": \"655 Washington St, Philadelphia, CA 12927\",\n            \"created_at\": \"2025-01-17T00:17:15.200501\",\n            \"email\": \"john.anderson600@email.com\",\n            \"id\": 14,\n            \"is_admin\": false,\n            \"name\": \"John Anderson\",\n            \"phone\": \"555-6316\"\n        },\n        {\n            \"address\": \"847 Highland Ave, New York, NY 42440\",\n            \"created_at\": \"2025-01-07T00:17:15.200501\",\n            \"email\": \"james.brown234@email.com\",\n            \"id\": 15,\n            \"is_admin\": false,\n            \"name\": \"James Brown\",\n            \"phone\": \"555-5925\"\n        },\n        {\n            \"address\": \"603 Maple Dr, Houston, CA 96721\",\n            \"created_at\": \"2025-04-18T00:17:15.200501\",\n            \"email\": \"thomas.hernandez576@email.com\",\n            \"id\": 16,\n            \"is_admin\": false,\n            \"name\": \"Thomas Hernandez\",\n            \"phone\": \"555-7446\"\n        },\n        {\n            \"address\": \"673 Sunset Blvd, San Jose, TX 97097\",\n            \"created_at\": \"2025-09-14T00:17:15.200501\",\n            \"email\": \"sophia.anderson656@email.com\",\n            \"id\": 17,\n            \"is_admin\": false,\n            \"name\": \"Sophia Anderson\",\n            \"phone\": \"555-7874\"\n        },\n        {\n            \"address\": \"942 Main St, Seattle, NY 24729\",\n            \"created_at\": \"2025-08-28T00:17:15.200501\",\n            \"email\": \"emma.brown230@email.com\",\n            \"id\": 18,\n            \"is_admin\": false,\n            \"name\": \"Emma Brown\",\n            \"phone\": \"555-5992\"\n        },\n        {\n            \"address\": \"446 Sunset Blvd, San Diego, CA 91758\",\n            \"created_at\": \"2025-08-11T00:17:15.200501\",\n            \"email\": \"sarah.lopez578@email.com\",\n            \"id\": 19,\n            \"is_admin\": false,\n            \"name\": \"Sarah Lopez\",\n            \"phone\": \"555-2268\"\n        },\n        {\n            \"address\": \"442 Maple Dr, Columbus, NY 21574\",\n            \"created_at\": \"2025-06-13T00:17:15.200501\",\n            \"email\": \"robert.davis907@email.com\",\n            \"id\": 20,\n            \"is_admin\": false,\n            \"name\": \"Robert Davis\",\n            \"phone\": \"555-8281\"\n        },\n        {\n            \"address\": \"434 Maple Dr, Jacksonville, NY 16997\",\n            \"created_at\": \"2025-02-13T00:17:15.200501\",\n            \"email\": \"charlotte.garcia110@email.com\",\n            \"id\": 21,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Garcia\",\n            \"phone\": \"555-3760\"\n        },\n        {\n            \"address\": \"446 Main St, Houston, CA 53115\",\n            \"created_at\": \"2024-11-18T00:17:15.200501\",\n            \"email\": \"amelia.taylor56@email.com\",\n            \"id\": 22,\n            \"is_admin\": false,\n            \"name\": \"Amelia Taylor\",\n            \"phone\": \"555-7118\"\n        },\n        {\n            \"address\": \"296 Lake View Dr, Seattle, TX 22962\",\n            \"created_at\": \"2025-09-08T00:17:15.200501\",\n            \"email\": \"charlotte.jones264@email.com\",\n            \"id\": 23,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Jones\",\n            \"phone\": \"555-4724\"\n        },\n        {\n            \"address\": \"780 River Rd, Columbus, CA 35183\",\n            \"created_at\": \"2024-11-01T00:17:15.200501\",\n            \"email\": \"david.wilson86@email.com\",\n            \"id\": 24,\n            \"is_admin\": false,\n            \"name\": \"David Wilson\",\n            \"phone\": \"555-3630\"\n        },\n        {\n            \"address\": \"114 River Rd, Houston, TX 65188\",\n            \"created_at\": \"2025-05-31T00:17:15.200501\",\n            \"email\": \"richard.lopez574@email.com\",\n            \"id\": 25,\n            \"is_admin\": false,\n            \"name\": \"Richard Lopez\",\n            \"phone\": \"555-2039\"\n        },\n        {\n            \"address\": \"941 Sunset Blvd, Columbus, TX 87725\",\n            \"created_at\": \"2025-02-21T00:17:15.200501\",\n            \"email\": \"daniel.miller844@email.com\",\n            \"id\": 26,\n            \"is_admin\": false,\n            \"name\": \"Daniel Miller\",\n            \"phone\": \"555-7245\"\n        },\n        {\n            \"address\": \"727 Sunset Blvd, Chicago, NY 10306\",\n            \"created_at\": \"2025-07-14T00:17:15.200501\",\n            \"email\": \"jane.hernandez121@email.com\",\n            \"id\": 27,\n            \"is_admin\": false,\n            \"name\": \"Jane Hernandez\",\n            \"phone\": \"555-6263\"\n        },\n        {\n            \"address\": \"742 Maple Dr, San Jose, NY 70312\",\n            \"created_at\": \"2025-08-18T00:17:15.200501\",\n            \"email\": \"michael.jones953@email.com\",\n            \"id\": 28,\n            \"is_admin\": false,\n            \"name\": \"Michael Jones\",\n            \"phone\": \"555-9299\"\n        },\n        {\n            \"address\": \"425 Oak Ave, San Antonio, NY 49808\",\n            \"created_at\": \"2024-12-14T00:17:15.200501\",\n            \"email\": \"sarah.rodriguez156@email.com\",\n            \"id\": 29,\n            \"is_admin\": false,\n            \"name\": \"Sarah Rodriguez\",\n            \"phone\": \"555-4683\"\n        },\n        {\n            \"address\": \"505 Maple Dr, Charlotte, FL 47748\",\n            \"created_at\": \"2025-06-29T00:17:15.200501\",\n            \"email\": \"amelia.hernandez949@email.com\",\n            \"id\": 30,\n            \"is_admin\": false,\n            \"name\": \"Amelia Hernandez\",\n            \"phone\": \"555-4230\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T01:13:39.086805\",\n            \"email\": \"test@example.com\",\n            \"id\": 31,\n            \"is_admin\": false,\n            \"name\": \"Test User\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:43:14.939008\",\n            \"email\": \"test@gmail.com\",\n            \"id\": 33,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:43:20.491427\",\n            \"email\": \"test2@gmail.com\",\n            \"id\": 34,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:44:42.360990\",\n            \"email\": \"test_tponkxwl@gmail.com\",\n            \"id\": 35,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T03:46:37.478699\",\n            \"email\": \"test_wcagsrhl@gmail.com\",\n            \"id\": 36,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:43:14.160298\",\n            \"email\": \"test_t77lew81@gmail.com\",\n            \"id\": 38,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:43:21.401070\",\n            \"email\": \"test_t0nucd6j@gmail.com\",\n            \"id\": 39,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:47:00.334277\",\n            \"email\": \"admin@test.com\",\n            \"id\": 40,\n            \"is_admin\": true,\n            \"name\": \"admin\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:33.930357\",\n            \"email\": \"test_20lz9mom@gmail.com\",\n            \"id\": 41,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:35.208614\",\n            \"email\": \"test_8d06l09p@gmail.com\",\n            \"id\": 42,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:36.567746\",\n            \"email\": \"test_9twko3ns@gmail.com\",\n            \"id\": 43,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:37.742293\",\n            \"email\": \"test_lejjqqas@gmail.com\",\n            \"id\": 44,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:38.823554\",\n            \"email\": \"test_n1gr1sbg@gmail.com\",\n            \"id\": 45,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:39.997709\",\n            \"email\": \"test_7y5tias4@gmail.com\",\n            \"id\": 46,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:41.069688\",\n            \"email\": \"test_2k0ggxnh@gmail.com\",\n            \"id\": 47,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:42.408078\",\n            \"email\": \"test_t0k5cixb@gmail.com\",\n            \"id\": 48,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:43.456032\",\n            \"email\": \"test_vr5pvdiy@gmail.com\",\n            \"id\": 49,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:17:28.195341\",\n            \"email\": \"test_bpnmr6p6@gmail.com\",\n            \"id\": 50,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T13:57:22.404502\",\n            \"email\": \"test_ry34r5tq@gmail.com\",\n            \"id\": 51,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:16:38.427726\",\n            \"email\": \"test_08cuju91@gmail.com\",\n            \"id\": 52,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:52:33.008129\",\n            \"email\": \"test_m7bd65lm@gmail.com\",\n            \"id\": 53,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:54:26.399497\",\n            \"email\": \"francine.howe@hotmail.com\",\n            \"id\": 54,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:04:29.753578\",\n            \"email\": \"gino.corkery@yahoo.com\",\n            \"id\": 55,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:05:41.207391\",\n            \"email\": \"edward.rowe@gmail.com\",\n            \"id\": 56,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:06:05.917785\",\n            \"email\": \"kenyetta.hirthe@hotmail.com\",\n            \"id\": 57,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        }\n    ],\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Get User (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be either 200 or 404 : Get User (Admin)\r",
									"pm.test(\"Status code is 200 or 404 : Get User (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"// check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"// Handle 200 case (user found)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK Get User: User found and data valid\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\");\r",
									"\r",
									"        let data = responseData.data;\r",
									"        pm.expect(data).to.be.an(\"object\");\r",
									"        pm.expect(data).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(data).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"address\").that.is.a(\"string\");\r",
									"        pm.expect(data).to.have.property(\"phone\").that.is.a(\"string\");\r",
									"        pm.expect(data).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        pm.expect(data).to.have.property(\"created_at\").that.is.a(\"string\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle 404 case (User not found)\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found Get User: User not found (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"User not found\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Extra safety: if status is something else, clearly report it\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						},
						"description": "``` java\n{\n    \"data\": {\n        \"address\": \"\",\n        \"created_at\": \"2025-10-15T20:06:05.917785\",\n        \"email\": \"kenyetta.hirthe@hotmail.com\",\n        \"id\": 57,\n        \"is_admin\": false,\n        \"name\": \"\",\n        \"phone\": \"\"\n    },\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Update User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be either 200 or 404 : Update User (Admin)\r",
									"pm.test(\"Status code is 200 or 404 : Update User (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"// check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"pm.test(\"PUT Update User Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"// Handle 200 case (successful update)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Update User 200 OK: User updated successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"User updated successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\");\r",
									"\r",
									"        // Deep validation of returned data\r",
									"        let data = responseData.data;\r",
									"        pm.expect(data).to.be.an(\"object\");\r",
									"        pm.expect(data).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(data).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"address\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"phone\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(data).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        pm.expect(data).to.have.property(\"created_at\").that.is.a(\"string\");\r",
									"        pm.expect(data).to.have.property(\"updated_at\").that.is.a(\"string\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle 404 case (User not found)\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"Update User 404 Not Found: User not found (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"User not found\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Extra safety: if status is something else, clearly report it\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"todelete2\",\n    \"phone\": \"555-0101\",\n    \"address\": \"123 Updated Street\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						},
						"description": "``` java\n{\n    \"data\": {\n        \"address\": \"123 Updated Street\",\n        \"created_at\": \"2025-10-15T20:06:05.917785\",\n        \"email\": \"kenyetta.hirthe@hotmail.com\",\n        \"id\": 57,\n        \"is_admin\": false,\n        \"name\": \"todelete2\",\n        \"phone\": \"555-0101\",\n        \"updated_at\": \"2025-10-15T20:20:48.079394\"\n    },\n    \"message\": \"User updated successfully\",\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "Delete User (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404 : Delete User\r",
									"pm.test(\"Status code is 200 or 404 : Delete User\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// 200 OK: User deleted successfully\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: User deleted successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"User deleted successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"email\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // optional cleanup: user_id no longer exists\r",
									"    pm.collectionVariables.unset(\"user_id\");\r",
									"    console.log(\"Deleted user_id removed from collection variables\");\r",
									"}\r",
									"\r",
									"// 404 Not Found: user doesn't exist\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: User not found (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"User not found\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Anything else (API took a day off)  :D\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						},
						"description": "``` java\n{\n    \"data\": {\n        \"email\": \"kenyetta.hirthe@hotmail.com\",\n        \"id\": 57\n    },\n    \"message\": \"User deleted successfully\",\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "User Activity (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get User Activity (Admin)\r",
									"pm.test(\"Status code is 200 : Get User Activity (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// 200 OK: Activity loaded\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: User activity retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"cart_items\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"total_reviews\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"total_spent\").that.is.a(\"number\");\r",
									"\r",
									"        pm.expect(d).to.have.property(\"orders\").that.is.an(\"array\");\r",
									"        pm.expect(d).to.have.property(\"reviews\").that.is.an(\"array\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/10/activity",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"10",
								"activity"
							]
						},
						"description": "``` json\n{\n    \"data\": {\n        \"cart_items\": 0,\n        \"orders\": [],\n        \"reviews\": [],\n        \"total_orders\": 0,\n        \"total_reviews\": 0,\n        \"total_spent\": 0,\n        \"user_id\": 57\n    },\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				}
			]
		},
		{
			"name": "Categories",
			"item": [
				{
					"name": "Create Category (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"\r",
									"// remember\r",
									"//Use responseData.data.id if data is an object.\r",
									"//Use responseData.data[0].id if data is an array.\r",
									"\r",
									"\r",
									"\r",
									"\r",
									"// Status code must be 201 : Create Category (Admin)\r",
									"pm.test(\"Status code is 201 : Create Category (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 Created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Category created successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Category created successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // Save category_id for later\r",
									"        pm.collectionVariables.set(\"category_id\", d.id);\r",
									"        console.log(\"Saved category_id:\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"TestCategory\",\n    \"description\": \"Test Category\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/categories",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"categories"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Categories",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get All Categories\r",
									"pm.test(\"Status code is 200 : Get All Categories\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Categories listed successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"\r",
									"        // Ensure count matches array length\r",
									"        pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"\r",
									"        // Validate first category item\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        }\r",
									"    });\r",
									"\r",
									"\r",
									"\r",
									"\r",
									"    // unique category names feature\r",
									"    let names = responseData.data.map(c => c.name);\r",
									"    let uniqueNames = [];\r",
									"\r",
									"// Check for unique names\r",
									"    names.forEach(n => {\r",
									"        if (!uniqueNames.includes(n)) {\r",
									"            uniqueNames.push(n);\r",
									"        }\r",
									"    });\r",
									"\r",
									"    pm.collectionVariables.set(\"categories\", JSON.stringify(uniqueNames));\r",
									"    console.log(\"Saved categories:\", uniqueNames);\r",
									"}\r",
									"\r",
									"\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/categories",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"categories"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Category (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be either 200 or 404\r",
									"pm.test(\"Status code is 200 or 404 : Delete Category (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"\r",
									"// check if response is valid json\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"\r",
									"// Handle 200 case (successful response)  no token checks here\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: success is true and message exists\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\");\r",
									"        pm.expect(responseData.message).to.be.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle 404 case (Category not found)  treat as expected/passing scenario\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Category not found (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Category not found\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"\r",
									"    });\r",
									"}\r",
									"\r",
									"// Extra safety: if status is something else, clearly report it\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/categories/{{category_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"categories",
								"{{category_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "List Products [modified]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get All Products\r",
									"pm.test(\"Status code is 200 : Get All Products\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Products listed successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        // success key\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"\r",
									"        // data array\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        let arr = responseData.data;\r",
									"\r",
									"        // pagination object\r",
									"        pm.expect(responseData).to.have.property(\"pagination\").that.is.an(\"object\");\r",
									"        let p = responseData.pagination;\r",
									"\r",
									"        pm.expect(p).to.have.property(\"page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"pages\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"per_page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"total\").that.is.a(\"number\");\r",
									"\r",
									"        // Check at least one product item (if list not empty)\r",
									"        if (arr.length > 0) {\r",
									"           // let item = arr[0];\r",
									"   let item = arr[arr.length - 1];   //  last product, not first\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // updated_at might be missing on some items, so check only if present\r",
									"            // exist only in the first product\r",
									"            if (item.hasOwnProperty(\"updated_at\")) {\r",
									"                pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"            }\r",
									"\r",
									"    \r",
									"      // Save the product_id for later use\r",
									"        pm.collectionVariables.set(\"product_id\", item.id);\r",
									"        console.log(\"Saved product_id(last item):\", item.id);\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status if api go sleep :D\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query Products [new]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Query Filtered Products List\r",
									"pm.test(\"Status code is 200 : Query Filtered Products List\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Query Filtered products retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        // success = true\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"\r",
									"        // data array must exist\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"\r",
									"        let arr = responseData.data;\r",
									"\r",
									"        // pagination object\r",
									"        pm.expect(responseData).to.have.property(\"pagination\").that.is.an(\"object\");\r",
									"        let p = responseData.pagination;\r",
									"\r",
									"        pm.expect(p).to.have.property(\"page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"pages\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"per_page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"total\").that.is.a(\"number\");\r",
									"\r",
									"        // Validate first product (if exists)\r",
									"        if (arr.length > 0) {\r",
									"            let item = arr[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item.category).to.eql(\"Electronics\");\r",
									"\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // updated_at in some products only\r",
									"            if (item.hasOwnProperty(\"updated_at\")) {\r",
									"                pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"            }\r",
									"\r",
									"            // price filter\r",
									"            pm.expect(item.price).to.be.within(10, 1000);\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products?category=Electronics&search=&page=1&per_page=10&min_price=10&max_price=1000",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							],
							"query": [
								{
									"key": "category",
									"value": "Electronics"
								},
								{
									"key": "search",
									"value": ""
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "min_price",
									"value": "10"
								},
								{
									"key": "max_price",
									"value": "1000"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Product (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 : Create Product\r",
									"pm.test(\"Status code is 201 : Create Product\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 Created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Product created successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product created successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"category\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // Save the product_id for later use\r",
									"        pm.collectionVariables.set(\"product_id\", d.id);\r",
									"        console.log(\"Saved product_id:\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"new product1\",\n    \"description\": \"new product description1\",\n    \"price\": 29.99,\n    \"category\": \"Electronics\",\n    \"stock\": 20,\n    \"image_url\": \"https://ci.suez.edu.eg/wp-content/uploads/2022/08/iti-logo.png\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Product (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Update Product (Admin)\r",
									"pm.test(\"Status code is 200 : Update Product (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product updated successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product updated successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"category\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"       // Save product_id again (optional but consistent)\r",
									"        pm.collectionVariables.set(\"product_id\", d.id);\r",
									"        console.log(\"Updated product_id stored:\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"description\": \"Updated description\",\n    \"price\": 34.99,\n    \"stock\": 75\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get Product by ID\r",
									"pm.test(\"Status code is 200 : Get Product by ID\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // If product_id stored earlier, ensure response matches it\r",
									"        let storedProductId = pm.collectionVariables.get(\"product_id\");\r",
									"        if (storedProductId) {\r",
									"            pm.expect(d.id).to.eql(parseInt(storedProductId));\r",
									"        }\r",
									"\r",
									"        // (re-save product_id to keep consistency\r",
									"        pm.collectionVariables.set(\"product_id\", d.id);\r",
									"        console.log(\"product_id stored/updated:\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Product (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Delete Product (Admin)\r",
									"pm.test(\"Status code is 200 : Delete Product (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product deleted successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product deleted successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // cleanup: remove product_id after deletion\r",
									"      //  pm.collectionVariables.unset(\"product_id\");\r",
									"      //  console.log(\"product_id removed from collection variables\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected (your API having a bad day)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Search Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Search Products\r",
									"pm.test(\"Status code is 200 : Search Products\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Search results valid\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"\r",
									"        // Ensure count matches returned array length\r",
									"        pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"\r",
									"        // Validate first item if exists\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"            // updated_at is optional\r",
									"            if (item.hasOwnProperty(\"updated_at\")) {\r",
									"                pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"            }\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/search?q=and",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "and"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Products by Electronics Category",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Load categories array\r",
									"let cats = pm.collectionVariables.get(\"categories\");\r",
									"cats = cats ? JSON.parse(cats) : [];\r",
									"\r",
									"// Pick first category (you can change index)\r",
									"let selected = cats[0];\r",
									"\r",
									"// Save into a simple variable to use in URL\r",
									"pm.variables.set(\"selected_category\", selected);\r",
									"\r",
									"\r",
									"//random category\r",
									"//let selected = cats[Math.floor(Math.random() * cats.length)];\r",
									"//pm.variables.set(\"selected_category\", selected);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get Products by Category\r",
									"pm.test(\"Status code is 200 : Get Products by Category\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Products by category retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"\r",
									"        // Ensure count matches array length\r",
									"        pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"\r",
									"        // Validate first product item if exists\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // updated_at in some products\r",
									"            if (item.hasOwnProperty(\"updated_at\")) {\r",
									"                pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"            }\r",
									"\r",
									"            // If selected_category variable exists, assert categories match\r",
									"            let sel = pm.variables.get(\"selected_category\");\r",
									"            if (sel) {\r",
									"                pm.test(\"Returned items match selected category\", function () {\r",
									"                    responseData.data.forEach(p => {\r",
									"                        pm.expect(p).to.have.property(\"category\", sel);\r",
									"                    });\r",
									"                });\r",
									"            }\r",
									"        } else {\r",
									"            pm.expect.fail(\"Expected at least one product in data array\");\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/category/{{selected_category}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"category",
								"{{selected_category}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Low Stock Products (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Low Stock Products (Admin)\r",
									"pm.test(\"Status code is 200 : Low Stock Products (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Low stock products retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"        pm.expect(responseData).to.have.property(\"threshold\").that.is.a(\"number\");\r",
									"\r",
									"        // Ensure count matches array length\r",
									"        pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"\r",
									"        // Validate items and stock relative to threshold\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // All items must have stock <= threshold\r",
									"            responseData.data.forEach(p => {\r",
									"                pm.expect(p.stock).to.be.at.most(responseData.threshold);\r",
									"            });\r",
									"        } else {\r",
									"            pm.expect.fail(\"Expected at least one low-stock product in data array\");\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/inventory/low-stock?threshold=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"inventory",
								"low-stock"
							],
							"query": [
								{
									"key": "threshold",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Product Stock (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Update Product Stock (Admin)\r",
									"pm.test(\"Status code is 200 : Update Product Stock (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case: Stock updated successfully\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Stock updated successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Stock updated successfully\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let item = responseData.data;\r",
									"\r",
									"        pm.expect(item).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"old_stock\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"new_stock\").that.is.a(\"number\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": 4,\n    \"stock\": 40\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/inventory/update-stock",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"inventory",
								"update-stock"
							]
						}
					},
					"response": []
				},
				{
					"name": "Bulk Update Products (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Bulk Update Products (Admin)\r",
									"pm.test(\"Status code is 200 : Bulk Update Products (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Check if response is valid JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Bulk update successful\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"updated_count\").that.is.a(\"number\");\r",
									"\r",
									"        // Basic check: updated_count must be at least 1\r",
									"        pm.expect(responseData.updated_count).to.be.at.least(1);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"updates\": [\n        {\n            \n            \"product_id\": 4,\n            \"price\": 24.98,\n            \"stock\": 60\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/bulk-update",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"bulk-update"
							]
						}
					},
					"response": []
				},
				{
					"name": "Export Products (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Export Products (Admin)\r",
									"pm.test(\"Status code is 200 : Export Products (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Products export retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"export_date\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"products\").that.is.an(\"array\");\r",
									"        pm.expect(d).to.have.property(\"total_products\").that.is.a(\"number\");\r",
									"\r",
									"        // total_// products should match products.length (simple check)\r",
									"   if (Array.isArray(d.products)) {\r",
									"    pm.expect(d.total_products).to.eql(d.products.length);\r",
									"\r",
									"    // validate first product if exists\r",
									"    if (d.products.length > 0) {\r",
									"        let item = d.products[0];\r",
									"\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"    }\r",
									"}\r",
									"    });\r",
									"\r",
									"\r",
									"  \r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/export/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"export",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": " Product Likes [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 or 400 : Like Product\r",
									"pm.test(\"Status code is 201 or 400 : Like Product\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 400]);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 case (Product liked successfully)\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Product liked successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product liked successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // optionally save like id for later requests\r",
									"        pm.collectionVariables.set(\"like_id\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle 400 case (Already liked)\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Already liked (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 400 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"already_liked\", true);\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData.error).to.eql(\"You have already liked this product\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"product_id\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/likes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"likes"
							]
						}
					},
					"response": []
				},
				{
					"name": " Get Product Likes Count [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Product Likes List\r",
									"pm.test(\"Status code is 200 : Product Likes List\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Likes listed successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"\r",
									"        // Ensure count matches array length\r",
									"        pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"\r",
									"        // Validate one like entry (if exists)\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"product_id\", \"1\");"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}/likes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}",
								"likes"
							]
						}
					},
					"response": []
				},
				{
					"name": " Check User Like [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Check Like Status\r",
									"pm.test(\"Status code is 200 : Check Like Status\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Like status retrieved\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"liked\").that.is.a(\"boolean\");\r",
									"\r",
									"        // If liked = true, validate and save like_id\r",
									"        if (responseData.liked === true) {\r",
									"            pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"            let d = responseData.data;\r",
									"            pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"            pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // Save like_id\r",
									"            pm.collectionVariables.set(\"like_id\", d.id);\r",
									"            console.log(\"Saved like_id:\", d.id);\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"product_id\", \"1\");"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}/likes/check",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}",
								"likes",
								"check"
							]
						}
					},
					"response": []
				},
				{
					"name": " Unlike Product (Remove Like) [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404 : Unlike Product\r",
									"pm.test(\"Status code is 200 or 404 : Unlike Product\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// 200 OK: Product unliked successfully\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product unliked successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product unliked successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // remove like_id since it's deleted\r",
									"   // pm.collectionVariables.unset(\"like_id\");\r",
									"   // console.log(\"like_id removed from collection variables\");\r",
									"}\r",
									"\r",
									"// 404: Like does not exist anymore (expected on 2nd delete)\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Like not found (expected)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Like not found\");\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected (should not happen)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/likes/{{like_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"likes",
								"{{like_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Cart",
			"item": [
				{
					"name": "Clear Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Clear Cart\r",
									"pm.test(\"Status code is 200 : Clear Cart\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Cart cleared successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Cart cleared successfully\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/cart",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add to Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 201 : Add Item to Cart\r",
									"pm.test(\"Status code is 201 : Add Item to Cart\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 Created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Item added to cart successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Item added to cart successfully\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": 4,\n    \"quantity\": 2\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/cart/items",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart",
								"items"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get User Cart\r",
									"pm.test(\"Status code is 200 : Get User Cart\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Cart retrieved successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"        pm.expect(responseData).to.have.property(\"total\").that.is.a(\"number\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"\r",
									"        // Validate first item if exists\r",
									"        if (responseData.data.length > 0) {\r",
									"            let item = responseData.data[0];\r",
									"\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"item_total\").that.is.a(\"number\");\r",
									"\r",
									"            pm.expect(item).to.have.property(\"product\").that.is.an(\"object\");\r",
									"        }\r",
									"    });\r",
									"\r",
									"    // Save cart_item_id\r",
									"    let firstCartId =\r",
									"        responseData.data &&\r",
									"        responseData.data[0] &&\r",
									"        responseData.data[0].id;\r",
									"\r",
									"    if (firstCartId !== undefined) {\r",
									"        pm.collectionVariables.set(\"cart_item_id\", firstCartId);\r",
									"        console.log(\"Saved cart_item_id:\", firstCartId);\r",
									"    }\r",
									"\r",
									"    // Check Total Price is double (not integer) for triggering failure\r",
									"    pm.test(\"Check that 'total price' in the cart is a double\", function () {\r",
									"        pm.expect(responseData.total % 1 !== 0).to.be.true;\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/cart",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Cart Item",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Update Cart Item\r",
									"pm.test(\"Status code is 200 : Update Cart Item\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Cart item updated successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Cart item updated successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // Save/refresh cart_item_id from response (keeps collection consistent)\r",
									"    if (jsonValid && responseData.data && responseData.data.id) {\r",
									"        pm.collectionVariables.set(\"cart_item_id\", responseData.data.id);\r",
									"        console.log(\"Saved cart_item_id:\", responseData.data.id);\r",
									"    }\r",
									"\r",
									"  \r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"quantity\": 3\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/cart/items/{{cart_item_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart",
								"items",
								"{{cart_item_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Remove Cart Item",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 or 404 : Remove Item from Cart\r",
									"pm.test(\"Status code is 200 or 404 : Remove Item from Cart\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK (Item removed)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Item removed from cart successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Item removed from cart successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // Remove saved cart_item_id since it's deleted\r",
									"    //pm.collectionVariables.unset(\"cart_item_id\");\r",
									"    //console.log(\"cart_item_id removed from collection variables.\");\r",
									"}\r",
									"\r",
									"// Handle 404 Not Found\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Cart item not found\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 404 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Cart item not found\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status (should never hit, but here for safety)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/cart/items/{{cart_item_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart",
								"items",
								"{{cart_item_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "Add to Cart [pre-conditons]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 201 : Add Item to Cart\r",
									"pm.test(\"Status code is 201 : Add Item to Cart\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 Created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Item added to cart successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Item added to cart successfully\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": 5,\n    \"quantity\": 3\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/cart/items",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"cart",
								"items"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 201 or 400 : Create Order\r",
									"pm.test(\"Status code is 201 or 400 : Create Order\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 400]);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// 201 Created: Order created successfully\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Order created successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Order created successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"shipping_address\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"        // Basic items validation (check first item fields)\r",
									"        if (d.items.length > 0) {\r",
									"            let it = d.items[0];\r",
									"            pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\");\r",
									"            pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"        } else {\r",
									"            pm.expect.fail(\"Expected at least one item in the order\");\r",
									"        }\r",
									"    });\r",
									"\r",
									"    // Save order id for later use\r",
									"    if (jsonValid && responseData.data && responseData.data.id) {\r",
									"        pm.collectionVariables.set(\"order_id\", responseData.data.id);\r",
									"        console.log(\"Saved order_id:\", responseData.data.id);\r",
									"    }\r",
									"}\r",
									"\r",
									"// 400 Bad Request: Cart is empty (precondition fail)\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Cart is empty (expected when precondition not met)\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 400 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Cart is empty\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"shipping_address\": \"123 Test Street\"}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/orders",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders"
							]
						},
						"description": "Generated from cURL: curl -X POST \"https://itigraduation.pythonanywhere.com/api/orders\" -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDgsImVtYWlsIjoidGVzdF8wOHY5bzB5dUBnbWFpbC5jb20iLCJpc19hZG1pbiI6ZmFsc2UsImV4cCI6MTc2MDcxNDI1NH0.1HND6jYGwIqUqnmvxTgrW7SNqk_F8b0TRMBcg8EeT2Y\" -H \"Content-Type: application/json\" -d \"{\\\"shipping_address\\\": \\\"123 Test Street\\\"}\""
					},
					"response": []
				},
				{
					"name": "List Orders",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get User Orders\r",
									"pm.test(\"Status code is 200 : Get User Orders\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Validate basic structure\r",
									"if (jsonValid) {\r",
									"    pm.test(\"Response has required fields\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"    });\r",
									"\r",
									"    // Validate first order if exists\r",
									"    if (responseData.data.length > 0) {\r",
									"        let item = responseData.data[0];\r",
									"\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"shipping_address\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"        // Item details check (simple)\r",
									"        if (item.items.length > 0) {\r",
									"            let it = item.items[0];\r",
									"            pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"        }\r",
									"    }\r",
									"\r",
									"    // Save last order id\r",
									"    let dataArr = responseData.data;\r",
									"    let lastOrderId = Array.isArray(dataArr) && dataArr.length > 0 ? dataArr[dataArr.length - 1].id : undefined;\r",
									"\r",
									"    if (lastOrderId !== undefined) {\r",
									"        pm.collectionVariables.set(\"order_id\", lastOrderId);\r",
									"        console.log(\"Saved order_id:\", lastOrderId);\r",
									"    }\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/orders",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 or 404 : Get Order by ID\r",
									"pm.test(\"Status code is 200 or 404 : Get Order by ID\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let responseData = {};\r",
									"let jsonOk = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonOk = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonOk).to.be.true;\r",
									"});\r",
									"\r",
									"// If 404 -> verify error message\r",
									"if (pm.response.code === 404) {\r",
									"    pm.test(\"Order not found structure\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"    // Stop here for 404\r",
									"    return;\r",
									"}\r",
									"\r",
									"// If 200 -> validate normal response\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Success is true\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    });\r",
									"\r",
									"    pm.test(\"Order data exists\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"    });\r",
									"\r",
									"    let d = responseData.data;\r",
									"\r",
									"  // Basic fields\r",
									"pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"pm.expect(d).to.have.property(\"shipping_address\").that.is.a(\"string\");\r",
									"pm.expect(d).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"// Conditional validation for shipping_address\r",
									"pm.test(\"Shipping address validity based on status\", function () {\r",
									"    if (d.status === \"pending\") {\r",
									"        // pending orders may have empty shipping address\r",
									"        pm.expect(d.shipping_address).to.be.a(\"string\");\r",
									"    } else {\r",
									"        pm.expect(d.shipping_address).to.be.a(\"string\").and.not.empty;\r",
									"    }\r",
									"});\r",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/orders/{{order_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders",
								"{{order_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Order (Admin) [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 or 404 : Update Order\r",
									"pm.test(\"Status code is 200 or 404 : Update Order\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Validate JSON format\r",
									"let responseData = {};\r",
									"let jsonOk = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonOk = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonOk).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 404\r",
									"if (pm.response.code === 404) {\r",
									"    pm.test(\"Order not found structure\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"    return; // exit, nothing else to validate\r",
									"}\r",
									"\r",
									"// Handle 200 case\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Success is true\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    pm.test(\"Order data exists\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"    });\r",
									"\r",
									"    let d = responseData.data;\r",
									"\r",
									"    // Basic fields validation\r",
									"    pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"shipping_address\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"    // Validate first item if present\r",
									"    if (d.items.length > 0) {\r",
									"        let it = d.items[0];\r",
									"        pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"        pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"    }\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"shipping_address\": \"456 alex iti, City, State 1234\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/orders/{{order_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders",
								"{{order_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Order Status (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404\r",
									"pm.test(\"Status code is 200 or 404 : Update Order Status\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Validate JSON format\r",
									"let responseData = {};\r",
									"let jsonOk = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonOk = false;\r",
									"}\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonOk).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 404 case\r",
									"if (pm.response.code === 404) {\r",
									"    pm.test(\"Order not found structure\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"    });\r",
									"    return; // no further checks\r",
									"}\r",
									"\r",
									"// For 200 (updated or unchanged)\r",
									"pm.test(\"Success is true\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// Message must be one of the allowed ones\r",
									"pm.test(\"Message is correct\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"});\r",
									"\r",
									"// Basic structure check\r",
									"pm.test(\"Order data exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"let d = responseData.data;\r",
									"\r",
									"// Validate order fields\r",
									"pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"pm.expect(d).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"shipping_address\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"pm.expect(d).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"// Validate first item if present\r",
									"if (d.items.length > 0) {\r",
									"    let it = d.items[0];\r",
									"    pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"    pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"    pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"    pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"processing\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/orders/{{order_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders",
								"{{order_id}}",
								"status"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 or 400 : Cancel Order\r",
									"pm.test(\"Status code is 200 or 400 : Cancel Order\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 400]);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// If JSON not valid, stop further assertions\r",
									"if (!jsonValid) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"// Handle 200 OK (order cancelled)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Order cancelled successfully\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        // items_restored at top level (optional but expected)\r",
									"        if (responseData.hasOwnProperty(\"items_restored\")) {\r",
									"            pm.expect(responseData.items_restored).to.be.a(\"number\");\r",
									"        }\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        // Basic guarded checks on data\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d.status).to.eql(\"cancelled\");\r",
									"        pm.expect(d).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"shipping_address\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // cancelled_at and cart_restored\r",
									"        if (d.hasOwnProperty(\"cancelled_at\")) {\r",
									"            pm.expect(d.cancelled_at).to.be.a(\"string\").and.not.empty;\r",
									"        }\r",
									"        if (d.hasOwnProperty(\"cart_restored\")) {\r",
									"            pm.expect(d.cart_restored).to.be.a(\"boolean\");\r",
									"        }\r",
									"\r",
									"        // items array validation (if present)\r",
									"        if (d.hasOwnProperty(\"items\")) {\r",
									"            pm.expect(d.items).to.be.an(\"array\");\r",
									"            if (d.items.length > 0) {\r",
									"                let item = d.items[0];\r",
									"                pm.expect(item).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"                pm.expect(item).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"                pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"                pm.expect(item).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"                pm.expect(item).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"            }\r",
									"        }\r",
									"    });\r",
									"\r",
									"  \r",
									"}\r",
									"\r",
									"// Handle 400 Bad Request (cannot cancel)\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Cannot cancel this order\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData.error).to.eql(\"Cannot cancel this order\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status (safety)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{user_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/orders/{{order_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders",
								"{{order_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Orders by Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get Orders by Status (cancelled)\r",
									"pm.test(\"Status code is 200 : Get Orders by Status (cancelled)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// If JSON invalid, stop to avoid null errors\r",
									"if (!jsonValid) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"// Basic checks\r",
									"pm.test(\"Success is true and data exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"    pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// count matches array length\r",
									"pm.test(\"count matches data length\", function () {\r",
									"    pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"});\r",
									"\r",
									"// Validate each order item and ensure status = \"cancelled\"\r",
									"pm.test(\"Each returned order is cancelled and has required fields\", function () {\r",
									"    responseData.data.forEach(function (order) {\r",
									"        pm.expect(order).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(order).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(order).to.have.property(\"shipping_address\").that.is.a(\"string\");\r",
									"        pm.expect(order).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(order.status).to.eql(\"cancelled\");\r",
									"        pm.expect(order).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(order).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(order).to.have.property(\"items\").that.is.an(\"array\");\r",
									"\r",
									"        // Validate first item of order.items if present\r",
									"        if (order.items.length > 0) {\r",
									"            let it = order.items[0];\r",
									"            pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/orders/status/cancelled",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"orders",
								"status",
								"cancelled"
							]
						}
					},
					"response": []
				},
				{
					"name": "Export Orders (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Export Orders (Admin)\r",
									"pm.test(\"Status code is 200 : Export Orders (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Stop if JSON invalid\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// Top-level checks\r",
									"pm.test(\"Success is true and data exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"let d = responseData.data;\r",
									"\r",
									"// Basic export fields\r",
									"pm.test(\"Export contains export_date, orders array and total_orders\", function () {\r",
									"    pm.expect(d).to.have.property(\"export_date\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"orders\").that.is.an(\"array\");\r",
									"    pm.expect(d).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// If orders present validate first order fields \r",
									"if (Array.isArray(d.orders) && d.orders.length > 0) {\r",
									"    let o = d.orders[0];\r",
									"    pm.test(\"First order has expected fields\", function () {\r",
									"        pm.expect(o).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(o).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(o).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"items\").that.is.an(\"array\");\r",
									"    });\r",
									"\r",
									"    // Validate first item inside first order if exists\r",
									"    if (o.items && o.items.length > 0) {\r",
									"        let it = o.items[0];\r",
									"        pm.test(\"First order item has expected fields\", function () {\r",
									"            pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"        });\r",
									"    }\r",
									"}\r",
									"\r",
									"// Period checks \r",
									"if (d.hasOwnProperty(\"period\")) {\r",
									"    pm.test(\"Period object has start_date and end_date\", function () {\r",
									"        pm.expect(d.period).to.have.property(\"start_date\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d.period).to.have.property(\"end_date\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"}\r",
									"\r",
									"// total_orders equals returned array length when all orders are included\r",
									"if (Array.isArray(d.orders)) {\r",
									"    pm.test(\"total_orders matches orders.length\", function () {\r",
									"        pm.expect(d.total_orders).to.eql(d.orders.length);\r",
									"    });\r",
									"}\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/export/orders?start_date=2025-10-01&end_date=2025-10-10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"export",
								"orders"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2025-10-01"
								},
								{
									"key": "end_date",
									"value": "2025-10-10"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reviews",
			"item": [
				{
					"name": "Create Product (Pre-Condition)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 : Create Product\r",
									"pm.test(\"Status code is 201 : Create Product\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 201 Created\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Product created successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 201 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product created successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"price\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"category\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // Save the product_id for later use\r",
									"        pm.collectionVariables.set(\"product_id\", d.id);\r",
									"        console.log(\"Saved product_id:\", d.id);\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"new product1\",\n    \"description\": \"new product description1\",\n    \"price\": 29.99,\n    \"category\": \"Electronics\",\n    \"stock\": 20,\n    \"image_url\": \"https://ci.suez.edu.eg/wp-content/uploads/2022/08/iti-logo.png\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Review",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201, 404 or 400 : Create Review\r",
									"pm.test(\"Status code is 201, 404 or 400 : Create Review\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([201, 404, 400]);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // Stop if JSON invalid\r",
									"\r",
									"// -------------------------\r",
									"// 201 Created\r",
									"// -------------------------\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Review created successfully\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Review created successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"rating\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"comment\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"    // Save review_id for later use\r",
									"    if (responseData.data && responseData.data.id) {\r",
									"        pm.collectionVariables.set(\"review_id\", responseData.data.id);\r",
									"        console.log(\"Saved review_id:\", responseData.data.id);\r",
									"    }\r",
									"}\r",
									"\r",
									"// -------------------------\r",
									"// 404 Product Not Found\r",
									"// -------------------------\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Product not found\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Product not found\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// -------------------------\r",
									"// 400 Already Reviewed\r",
									"// -------------------------\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Already reviewed\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"You have already reviewed this product\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// -------------------------\r",
									"// Unexpected status\r",
									"// -------------------------\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{product_id}},\n    \"rating\": 4,\n    \"comment\": \"Excellent product2!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Product Reviews",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Product Reviews\r",
									"pm.test(\"Status code is 200 : Get Product Reviews\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;  // Stop on invalid JSON\r",
									"\r",
									"// 200 OK: Validate expected fields\r",
									"pm.test(\"200 OK: Product reviews returned successfully\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"average_rating\").that.is.a(\"number\");\r",
									"    pm.expect(responseData).to.have.property(\"count\").that.is.a(\"number\");\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"});\r",
									"\r",
									"// If reviews exist, validate the first review\r",
									"if (Array.isArray(responseData.data) && responseData.data.length > 0) {\r",
									"    let r = responseData.data[0];\r",
									"\r",
									"    pm.test(\"First review item has required fields\", function () {\r",
									"        pm.expect(r).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"rating\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"comment\").that.is.a(\"string\");\r",
									"        pm.expect(r).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check if User Reviewed Product [NEW]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Check if User Reviewed Product\r",
									"pm.test(\"Status code is 200 : Check Review Status\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop if invalid JSON\r",
									"\r",
									"// Basic checks\r",
									"pm.test(\"Success is true and has_reviewed exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"has_reviewed\").that.is.a(\"boolean\");\r",
									"    pm.expect(responseData).to.have.property(\"review\");\r",
									"});\r",
									"\r",
									"// -----------------------------\r",
									"// Case 1: has_reviewed = true\r",
									"// -----------------------------\r",
									"if (responseData.has_reviewed === true) {\r",
									"    pm.test(\"User HAS reviewed: Validate review object\", function () {\r",
									"        let r = responseData.review;\r",
									"\r",
									"        pm.expect(r).to.be.an(\"object\");\r",
									"        pm.expect(r).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"rating\").that.is.a(\"number\");\r",
									"        pm.expect(r).to.have.property(\"comment\").that.is.a(\"string\");\r",
									"        pm.expect(r).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"}\r",
									"\r",
									"// -----------------------------\r",
									"// Case 2: has_reviewed = false\r",
									"// -----------------------------\r",
									"if (responseData.has_reviewed === false) {\r",
									"    pm.test(\"User has NOT reviewed: review must be null\", function () {\r",
									"        pm.expect(responseData.review).to.eql(null);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}/reviews/check",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}",
								"reviews",
								"check"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Product (Post-Condition)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Delete Product (Admin)\r",
									"pm.test(\"Status code is 200 : Delete Product (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product deleted successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\", \"Product deleted successfully\");\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"        let d = responseData.data;\r",
									"\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"        // cleanup: remove product_id after deletion\r",
									"      //  pm.collectionVariables.unset(\"product_id\");\r",
									"      //  console.log(\"product_id removed from collection variables\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected (your API having a bad day)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Stats & Analytics",
			"item": [
				{
					"name": "Admin Stats",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Dashboard Statistics\r",
									"pm.test(\"Status code is 200 : Dashboard Statistics\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop on invalid JSON\r",
									"\r",
									"// Basic structure check\r",
									"pm.test(\"Success is true and data exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"let d = responseData.data;\r",
									"\r",
									"// Validate all statistics fields \r",
									"pm.test(\"Dashboard statistics fields are valid\", function () {\r",
									"    pm.expect(d).to.have.property(\"low_stock_products\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"pending_orders\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_products\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_revenue\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_reviews\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_users\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// total_orders should be >= pending_orders\r",
									"pm.test(\"Sanity check: total_orders >= pending_orders\", function () {\r",
									"    pm.expect(d.total_orders).to.be.at.least(d.pending_orders);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"stats"
							]
						}
					},
					"response": []
				},
				{
					"name": "Dashboard Analytics",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get Dashboard Analytics\r",
									"pm.test(\"Status code is 200 : Get Dashboard Analytics\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop if invalid JSON\r",
									"\r",
									"// Top-level checks\r",
									"pm.test(\"Success is true and data exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"let d = responseData.data;\r",
									"\r",
									"// Basic numeric fields\r",
									"pm.test(\"Basic totals exist and are numbers\", function () {\r",
									"    pm.expect(d).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_products\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_revenue\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"total_users\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"monthly_revenue\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// page_views_data checks\r",
									"pm.test(\"page_views_data is array of {date, views}\", function () {\r",
									"    pm.expect(d).to.have.property(\"page_views_data\").that.is.an(\"array\");\r",
									"    if (d.page_views_data.length > 0) {\r",
									"        d.page_views_data.forEach(function (pv) {\r",
									"            pm.expect(pv).to.have.property(\"date\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(pv).to.have.property(\"views\").that.is.a(\"number\");\r",
									"        });\r",
									"    }\r",
									"});\r",
									"\r",
									"// sales_data checks\r",
									"pm.test(\"sales_data is array of {date, sales}\", function () {\r",
									"    pm.expect(d).to.have.property(\"sales_data\").that.is.an(\"array\");\r",
									"    if (d.sales_data.length > 0) {\r",
									"        d.sales_data.forEach(function (s) {\r",
									"            pm.expect(s).to.have.property(\"date\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(s).to.have.property(\"sales\").that.is.a(\"number\");\r",
									"        });\r",
									"    }\r",
									"});\r",
									"\r",
									"// user_registrations checks\r",
									"pm.test(\"user_registrations is array of {date, registrations}\", function () {\r",
									"    pm.expect(d).to.have.property(\"user_registrations\").that.is.an(\"array\");\r",
									"    if (d.user_registrations.length > 0) {\r",
									"        d.user_registrations.forEach(function (u) {\r",
									"            pm.expect(u).to.have.property(\"date\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(u).to.have.property(\"registrations\").that.is.a(\"number\");\r",
									"        });\r",
									"    }\r",
									"});\r",
									"\r",
									"// popular_products checks\r",
									"pm.test(\"popular_products has items with orders and product object\", function () {\r",
									"    pm.expect(d).to.have.property(\"popular_products\").that.is.an(\"array\");\r",
									"    if (d.popular_products.length > 0) {\r",
									"        d.popular_products.forEach(function (pp) {\r",
									"            pm.expect(pp).to.have.property(\"orders\").that.is.a(\"number\");\r",
									"            pm.expect(pp).to.have.property(\"views\").that.is.a(\"number\");\r",
									"            pm.expect(pp).to.have.property(\"product\").that.is.an(\"object\");\r",
									"\r",
									"            // validate product fields (first-level)\r",
									"            let p = pp.product;\r",
									"            pm.expect(p).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(p).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(p).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(p).to.have.property(\"category\").that.is.a(\"string\");\r",
									"        });\r",
									"    }\r",
									"});\r",
									"\r",
									"// arrays should be present (even if empty) and totals non-negative\r",
									"pm.test(\"arrays present and totals non-negative\", function () {\r",
									"    pm.expect(Array.isArray(d.page_views_data)).to.be.true;\r",
									"    pm.expect(Array.isArray(d.sales_data)).to.be.true;\r",
									"    pm.expect(Array.isArray(d.popular_products)).to.be.true;\r",
									"    pm.expect(Array.isArray(d.user_registrations)).to.be.true;\r",
									"\r",
									"    pm.expect(d.total_orders).to.be.at.least(0);\r",
									"    pm.expect(d.total_products).to.be.at.least(0);\r",
									"    pm.expect(d.total_revenue).to.be.at.least(0);\r",
									"    pm.expect(d.total_users).to.be.at.least(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/analytics/dashboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"analytics",
								"dashboard"
							]
						}
					},
					"response": []
				},
				{
					"name": "Sales Report",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200 : Get Sales Report\r",
									"pm.test(\"Status code is 200 : Get Sales Report\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop if invalid JSON\r",
									"\r",
									"// Top-level checks\r",
									"pm.test(\"Success true and data object exists\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"let d = responseData.data;\r",
									"\r",
									"// Orders array checks\r",
									"pm.test(\"Orders is an array and count-like checks\", function () {\r",
									"    pm.expect(d).to.have.property(\"orders\").that.is.an(\"array\");\r",
									"    // if present, validate first order simply\r",
									"    if (d.orders.length > 0) {\r",
									"        let o = d.orders[0];\r",
									"        pm.expect(o).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(o).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(o).to.have.property(\"total_amount\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(o).to.have.property(\"items\").that.is.an(\"array\");\r",
									"        // validate first item if exists\r",
									"        if (o.items && o.items.length > 0) {\r",
									"            let it = o.items[0];\r",
									"            pm.expect(it).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"product_name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(it).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"quantity\").that.is.a(\"number\");\r",
									"            pm.expect(it).to.have.property(\"subtotal\").that.is.a(\"number\");\r",
									"        }\r",
									"    }\r",
									"});\r",
									"\r",
									"// Period checks\r",
									"if (d.hasOwnProperty(\"period\")) {\r",
									"    pm.test(\"Period has start_date and end_date\", function () {\r",
									"        pm.expect(d.period).to.have.property(\"start_date\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d.period).to.have.property(\"end_date\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"}\r",
									"\r",
									"// sales_by_status checks\r",
									"if (d.hasOwnProperty(\"sales_by_status\")) {\r",
									"    pm.test(\"sales_by_status has expected keys with numbers\", function () {\r",
									"        let s = d.sales_by_status;\r",
									"        [\"cancelled\",\"delivered\",\"pending\",\"processing\",\"shipped\"].forEach(function (k) {\r",
									"            if (s.hasOwnProperty(k)) {\r",
									"                pm.expect(s[k]).to.have.property(\"count\").that.is.a(\"number\");\r",
									"                pm.expect(s[k]).to.have.property(\"revenue\").that.is.a(\"number\");\r",
									"            }\r",
									"        });\r",
									"    });\r",
									"}\r",
									"\r",
									"// summary checks\r",
									"if (d.hasOwnProperty(\"summary\")) {\r",
									"    pm.test(\"Summary fields exist and are numbers\", function () {\r",
									"        pm.expect(d.summary).to.have.property(\"average_order_value\").that.is.a(\"number\");\r",
									"        pm.expect(d.summary).to.have.property(\"cancelled_orders\").that.is.a(\"number\");\r",
									"        pm.expect(d.summary).to.have.property(\"total_orders\").that.is.a(\"number\");\r",
									"        pm.expect(d.summary).to.have.property(\"total_sales\").that.is.a(\"number\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// totals non-negative\r",
									"pm.test(\"numeric totals are non-negative\", function () {\r",
									"    if (d.summary && typeof d.summary.total_sales === \"number\") {\r",
									"        pm.expect(d.summary.total_sales).to.be.at.least(0);\r",
									"    }\r",
									"    if (d.orders && Array.isArray(d.orders)) {\r",
									"        d.orders.forEach(function (ord) {\r",
									"            pm.expect(ord.total_amount).to.be.at.least(0);\r",
									"        });\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/analytics/reports/sales?start_date=2024-01-01&end_date=2025-10-10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"analytics",
								"reports",
								"sales"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2024-01-01"
								},
								{
									"key": "end_date",
									"value": "2025-10-10"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Help Center",
			"item": [
				{
					"name": "Create Help Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Create Help Article (Admin)\r",
									"pm.test(\"Status code is 200 : Create Help Article (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop if invalid JSON\r",
									"\r",
									"// 201 Created checks\r",
									"pm.test(\"200 ok: Article created successfully\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(responseData.message).to.eql(\"Article created successfully\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"question\": \"How to track my order2?\",\n    \"answer\": \"Use the orders page to check status2.\",\n    \"category\": \"Orders2\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/help",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Help Categories",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Help Categories\r",
									"pm.test(\"Status code is 200 : Get Help Categories\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// Basic success check\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// Data must be an array\r",
									"pm.test(\"Categories list is an array\", function () {\r",
									"    pm.expect(responseData.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each item\r",
									"pm.test(\"Each category is a non-empty string\", function () {\r",
									"    responseData.data.forEach(c => {\r",
									"        pm.expect(c).to.be.a(\"string\").and.not.empty;\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/help/categories",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help",
								"categories"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Help Articles",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : List Help Articles\r",
									"pm.test(\"Status code is 200 : List Help Articles\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count must be number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// data must be array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each help article\r",
									"pm.test(\"Each article has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\");\r",
									"        pm.expect(item).to.have.property(\"question\");\r",
									"        pm.expect(item).to.have.property(\"answer\");\r",
									"        pm.expect(item).to.have.property(\"category\");\r",
									"        pm.expect(item).to.have.property(\"helpful_count\");\r",
									"        pm.expect(item).to.have.property(\"created_at\");\r",
									"    });\r",
									"});\r",
									"\r",
									"\r",
									"// -----------------------------\r",
									"// Save help_id \r",
									"// -----------------------------\r",
									"\r",
									"if (res && Array.isArray(res.data)) {\r",
									"    let dataArr = res.data;\r",
									"    let lastHelpId = dataArr.length > 0 ? dataArr[dataArr.length - 1].id : undefined;\r",
									"\r",
									"    if (lastHelpId !== undefined && lastHelpId !== null) {\r",
									"        pm.collectionVariables.set(\"help_id\", lastHelpId);\r",
									"        console.log(\"Saved help_id:\", lastHelpId);\r",
									"    } else {\r",
									"        console.log(\"No help_id to save.\");\r",
									"    }\r",
									"} else {\r",
									"    console.log(\"Invalid response structure. Cannot extract help_id.\");\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/help?category=Orders2&page=1&per_page=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help"
							],
							"query": [
								{
									"key": "category",
									"value": "Orders2"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Help Article By ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404\r",
									"pm.test(\"Status code is 200 or 404 : Get Help Article by ID\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Try parse JSON safely\r",
									"let res = {};\r",
									"let validJSON = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    validJSON = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(validJSON).to.be.true;\r",
									"});\r",
									"\r",
									"if (!validJSON) return;\r",
									"\r",
									"// If 200 (success case)\r",
									"if (pm.response.code === 200) {\r",
									"\r",
									"    pm.test(\"Success is true\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", true);\r",
									"        pm.expect(res).to.have.property(\"data\").that.is.an(\"object\");\r",
									"    });\r",
									"\r",
									"    let d = res.data;\r",
									"\r",
									"    pm.test(\"Help article has all required fields\", function () {\r",
									"        pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"question\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"answer\").that.is.a(\"string\");\r",
									"        pm.expect(d).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(d).to.have.property(\"helpful_count\").that.is.a(\"number\");\r",
									"        pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"\r",
									"} else if (pm.response.code === 404) {\r",
									"\r",
									"    // 404 validation\r",
									"    pm.test(\"Error response structure is correct\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", false);\r",
									"        pm.expect(res).to.have.property(\"error\", \"Article not found\");\r",
									"    });\r",
									"\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/help/{{help_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help",
								"{{help_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mark Article Helpful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 400 or 404 : Mark Article Helpful\r",
									"pm.test(\"Status code is 200 or 400 or 404 : Mark Article Helpful\", function () {\r",
									"    pm.expect([200, 400, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop if invalid JSON\r",
									"\r",
									"// 200 OK: thank-you message\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Thank you for your feedback\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData.message).to.eql(\"Thank you for your feedback!\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// 400 Bad Request: already helpful\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Already marked helpful\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"already_helpful\", true);\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData.error).to.eql(\"You have already marked this article as helpful\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// 404 Not Found: article missing\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Article not found\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Article not found\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected fallback (shouldn't happen because of first test)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/help/{{help_id}}/helpful",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help",
								"{{help_id}}",
								"helpful"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Help Article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404 : Update Help Article\r",
									"pm.test(\"Status code is 200 or 404 : Update Help Article\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Validate JSON format\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;  // Don't bother testing deeper if JSON broke\r",
									"\r",
									"// 200 OK: article updated\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Article updated successfully\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", true);\r",
									"        pm.expect(res).to.have.property(\"message\", \"Article updated successfully\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// 404 Not Found: article missing\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Article not found\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", false);\r",
									"        pm.expect(res).to.have.property(\"error\", \"Article not found\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// If some other strange status shows up (shouldn't happen)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"question\": \"How to track my order?\",\n    \"answer\": \"Visit the orders page and use the tracking link.\",\n    \"category\": \"Orders\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/help/{{help_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"help",
								"{{help_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Contact",
			"item": [
				{
					"name": "Submit Contact Message",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 : Submit Contact Message\r",
									"pm.test(\"Status code is 201 : Submit Contact Message\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Validate JSON format\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// message check\r",
									"pm.test(\"Has success message\", function () {\r",
									"    pm.expect(res).to.have.property(\r",
									"        \"message\",\r",
									"        \"Your message has been submitted successfully. We will get back to you soon!\"\r",
									"    );\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Mo Gomaa\",\n    \"email\": \"iti@example.com\",\n    \"subject\": \"Order issue Test\",\n    \"message\": \"I need help with my order Test.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/contact",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"contact"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Contact Messages",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Contact Messages\r",
									"pm.test(\"Status code is 200 : Get Contact Messages\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON format\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count must be number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// data must be array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each contact message\r",
									"pm.test(\"Each message has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\");\r",
									"        pm.expect(item).to.have.property(\"name\");\r",
									"        pm.expect(item).to.have.property(\"email\");\r",
									"        pm.expect(item).to.have.property(\"subject\");\r",
									"        pm.expect(item).to.have.property(\"message\");\r",
									"        pm.expect(item).to.have.property(\"status\");\r",
									"        pm.expect(item).to.have.property(\"created_at\");\r",
									"    });\r",
									"});\r",
									"\r",
									"\r",
									"// =========================\r",
									"// Save last contact message id\r",
									"// =========================\r",
									"\r",
									"// Parse response JSON again (safe reuse)\r",
									"let responseData = res;\r",
									"\r",
									"// Get last message id\r",
									"let dataArr = responseData.data;\r",
									"let contactMessageid = Array.isArray(dataArr) && dataArr.length > 0 \r",
									"    ? dataArr[dataArr.length - 1].id \r",
									"    : undefined;\r",
									"\r",
									"// Store as collection variable\r",
									"if (contactMessageid !== undefined) {\r",
									"    pm.collectionVariables.set(\"contact_message_id\", contactMessageid);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/contact/messages?status=pending",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"contact",
								"messages"
							],
							"query": [
								{
									"key": "status",
									"value": "pending"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Respond to Contact Message",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Respond to Contact Message\r",
									"pm.test(\"Status code is 200 : Respond to Contact Message\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let res = {};\r",
									"let validJSON = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    validJSON = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(validJSON).to.be.true;\r",
									"});\r",
									"\r",
									"if (!validJSON) return;\r",
									"\r",
									"// Success flag and message\r",
									"pm.test(\"200 OK: Response sent successfully\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"    pm.expect(res).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(res.message).to.eql(\"Response sent successfully\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"response\": \"Thanks for reaching out Test. Your issue is resolved.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/contact/messages/{{contact_message_id}}/respond",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"contact",
								"messages",
								"{{contact_message_id}}",
								"respond"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Wishlist",
			"item": [
				{
					"name": "List Users[Pre-Conditon1]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code is 200: users are listed\r",
									"pm.test(\"Status code is 200: users are listed\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 case (users listed)\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: users listed and data valid\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"\r",
									"        // optional: check count exists and matches length\r",
									"        if (responseData.hasOwnProperty(\"count\")) {\r",
									"            pm.expect(responseData.count).to.be.a(\"number\");\r",
									"            pm.expect(responseData.count).to.eql(responseData.data.length);\r",
									"        }\r",
									"\r",
									"        // check at least one user object has required fields\r",
									"        if (responseData.data.length > 0) {\r",
									"            let sample = responseData.data[0];\r",
									"            pm.expect(sample).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(sample).to.have.property(\"email\").that.is.a(\"string\");\r",
									"            pm.expect(sample).to.have.property(\"name\").that.is.a(\"string\");\r",
									"            pm.expect(sample).to.have.property(\"is_admin\").that.is.a(\"boolean\");\r",
									"        } else {\r",
									"            pm.expect.fail(\"Expected at least one user in data array\");\r",
									"        }\r",
									"    });\r",
									"\r",
									"    // Save last user's id as collection variable\r",
									"    let dataArr = responseData.data;\r",
									"    let userID = Array.isArray(dataArr) && dataArr.length > 0 ? dataArr[dataArr.length - 1].id : undefined;\r",
									"    if (typeof userID !== \"undefined\") {\r",
									"        pm.collectionVariables.set(\"user_id\", userID);\r",
									"        console.log(\"Saved user_id:\", userID);\r",
									"    } else {\r",
									"        console.warn(\"No user_id to save (data array empty)\");\r",
									"    }\r",
									"}\r",
									"\r",
									"// Unexpected status\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						},
						"description": "``` json\n{\n    \"count\": 54,\n    \"data\": [\n        {\n            \"address\": \"226 Oak Ave, Indianapolis, CA 90001\",\n            \"created_at\": \"2025-02-14T00:17:15.199498\",\n            \"email\": \"user@test.com\",\n            \"id\": 2,\n            \"is_admin\": false,\n            \"name\": \"Test User\",\n            \"phone\": \"555-0101\"\n        },\n        {\n            \"address\": \"169 River Rd, Charlotte, FL 84469\",\n            \"created_at\": \"2025-01-05T00:17:15.199498\",\n            \"email\": \"charlotte.taylor495@email.com\",\n            \"id\": 3,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Taylor\",\n            \"phone\": \"555-4838\"\n        },\n        {\n            \"address\": \"174 Park Blvd, Houston, TX 15936\",\n            \"created_at\": \"2025-09-25T00:17:15.199498\",\n            \"email\": \"mia.miller610@email.com\",\n            \"id\": 4,\n            \"is_admin\": false,\n            \"name\": \"Mia Miller\",\n            \"phone\": \"555-7385\"\n        },\n        {\n            \"address\": \"700 Main St, San Antonio, CA 95466\",\n            \"created_at\": \"2024-11-15T00:17:15.199498\",\n            \"email\": \"emily.jackson5@email.com\",\n            \"id\": 5,\n            \"is_admin\": false,\n            \"name\": \"Emily Jackson\",\n            \"phone\": \"555-7018\"\n        },\n        {\n            \"address\": \"787 Cedar Ln, Phoenix, CA 22012\",\n            \"created_at\": \"2025-08-10T00:17:15.199498\",\n            \"email\": \"william.miller728@email.com\",\n            \"id\": 6,\n            \"is_admin\": false,\n            \"name\": \"William Miller\",\n            \"phone\": \"555-7602\"\n        },\n        {\n            \"address\": \"488 Washington St, Chicago, FL 95744\",\n            \"created_at\": \"2024-12-01T00:17:15.199498\",\n            \"email\": \"richard.martinez950@email.com\",\n            \"id\": 7,\n            \"is_admin\": false,\n            \"name\": \"Richard Martinez\",\n            \"phone\": \"555-6732\"\n        },\n        {\n            \"address\": \"880 Washington St, Seattle, FL 17234\",\n            \"created_at\": \"2025-07-10T00:17:15.199498\",\n            \"email\": \"matthew.taylor42@email.com\",\n            \"id\": 8,\n            \"is_admin\": false,\n            \"name\": \"Matthew Taylor\",\n            \"phone\": \"555-1734\"\n        },\n        {\n            \"address\": \"673 Sunset Blvd, Indianapolis, CA 34515\",\n            \"created_at\": \"2025-07-28T00:17:15.199498\",\n            \"email\": \"daniel.martinez992@email.com\",\n            \"id\": 9,\n            \"is_admin\": false,\n            \"name\": \"Daniel Martinez\",\n            \"phone\": \"555-2832\"\n        },\n        {\n            \"address\": \"799 Oak Ave, Phoenix, NY 27943\",\n            \"created_at\": \"2025-10-14T00:17:15.199498\",\n            \"email\": \"matthew.thomas596@email.com\",\n            \"id\": 10,\n            \"is_admin\": false,\n            \"name\": \"Matthew Thomas\",\n            \"phone\": \"555-1405\"\n        },\n        {\n            \"address\": \"394 Oak Ave, Indianapolis, NY 88148\",\n            \"created_at\": \"2025-04-08T00:17:15.200501\",\n            \"email\": \"mia.martin508@email.com\",\n            \"id\": 11,\n            \"is_admin\": false,\n            \"name\": \"Mia Martin\",\n            \"phone\": \"555-5703\"\n        },\n        {\n            \"address\": \"614 Lake View Dr, Columbus, CA 26095\",\n            \"created_at\": \"2025-04-04T00:17:15.200501\",\n            \"email\": \"emma.moore579@email.com\",\n            \"id\": 12,\n            \"is_admin\": false,\n            \"name\": \"Emma Moore\",\n            \"phone\": \"555-7607\"\n        },\n        {\n            \"address\": \"351 Maple Dr, San Francisco, CA 87181\",\n            \"created_at\": \"2025-06-21T00:17:15.200501\",\n            \"email\": \"emily.smith181@email.com\",\n            \"id\": 13,\n            \"is_admin\": false,\n            \"name\": \"Emily Smith\",\n            \"phone\": \"555-3436\"\n        },\n        {\n            \"address\": \"655 Washington St, Philadelphia, CA 12927\",\n            \"created_at\": \"2025-01-17T00:17:15.200501\",\n            \"email\": \"john.anderson600@email.com\",\n            \"id\": 14,\n            \"is_admin\": false,\n            \"name\": \"John Anderson\",\n            \"phone\": \"555-6316\"\n        },\n        {\n            \"address\": \"847 Highland Ave, New York, NY 42440\",\n            \"created_at\": \"2025-01-07T00:17:15.200501\",\n            \"email\": \"james.brown234@email.com\",\n            \"id\": 15,\n            \"is_admin\": false,\n            \"name\": \"James Brown\",\n            \"phone\": \"555-5925\"\n        },\n        {\n            \"address\": \"603 Maple Dr, Houston, CA 96721\",\n            \"created_at\": \"2025-04-18T00:17:15.200501\",\n            \"email\": \"thomas.hernandez576@email.com\",\n            \"id\": 16,\n            \"is_admin\": false,\n            \"name\": \"Thomas Hernandez\",\n            \"phone\": \"555-7446\"\n        },\n        {\n            \"address\": \"673 Sunset Blvd, San Jose, TX 97097\",\n            \"created_at\": \"2025-09-14T00:17:15.200501\",\n            \"email\": \"sophia.anderson656@email.com\",\n            \"id\": 17,\n            \"is_admin\": false,\n            \"name\": \"Sophia Anderson\",\n            \"phone\": \"555-7874\"\n        },\n        {\n            \"address\": \"942 Main St, Seattle, NY 24729\",\n            \"created_at\": \"2025-08-28T00:17:15.200501\",\n            \"email\": \"emma.brown230@email.com\",\n            \"id\": 18,\n            \"is_admin\": false,\n            \"name\": \"Emma Brown\",\n            \"phone\": \"555-5992\"\n        },\n        {\n            \"address\": \"446 Sunset Blvd, San Diego, CA 91758\",\n            \"created_at\": \"2025-08-11T00:17:15.200501\",\n            \"email\": \"sarah.lopez578@email.com\",\n            \"id\": 19,\n            \"is_admin\": false,\n            \"name\": \"Sarah Lopez\",\n            \"phone\": \"555-2268\"\n        },\n        {\n            \"address\": \"442 Maple Dr, Columbus, NY 21574\",\n            \"created_at\": \"2025-06-13T00:17:15.200501\",\n            \"email\": \"robert.davis907@email.com\",\n            \"id\": 20,\n            \"is_admin\": false,\n            \"name\": \"Robert Davis\",\n            \"phone\": \"555-8281\"\n        },\n        {\n            \"address\": \"434 Maple Dr, Jacksonville, NY 16997\",\n            \"created_at\": \"2025-02-13T00:17:15.200501\",\n            \"email\": \"charlotte.garcia110@email.com\",\n            \"id\": 21,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Garcia\",\n            \"phone\": \"555-3760\"\n        },\n        {\n            \"address\": \"446 Main St, Houston, CA 53115\",\n            \"created_at\": \"2024-11-18T00:17:15.200501\",\n            \"email\": \"amelia.taylor56@email.com\",\n            \"id\": 22,\n            \"is_admin\": false,\n            \"name\": \"Amelia Taylor\",\n            \"phone\": \"555-7118\"\n        },\n        {\n            \"address\": \"296 Lake View Dr, Seattle, TX 22962\",\n            \"created_at\": \"2025-09-08T00:17:15.200501\",\n            \"email\": \"charlotte.jones264@email.com\",\n            \"id\": 23,\n            \"is_admin\": false,\n            \"name\": \"Charlotte Jones\",\n            \"phone\": \"555-4724\"\n        },\n        {\n            \"address\": \"780 River Rd, Columbus, CA 35183\",\n            \"created_at\": \"2024-11-01T00:17:15.200501\",\n            \"email\": \"david.wilson86@email.com\",\n            \"id\": 24,\n            \"is_admin\": false,\n            \"name\": \"David Wilson\",\n            \"phone\": \"555-3630\"\n        },\n        {\n            \"address\": \"114 River Rd, Houston, TX 65188\",\n            \"created_at\": \"2025-05-31T00:17:15.200501\",\n            \"email\": \"richard.lopez574@email.com\",\n            \"id\": 25,\n            \"is_admin\": false,\n            \"name\": \"Richard Lopez\",\n            \"phone\": \"555-2039\"\n        },\n        {\n            \"address\": \"941 Sunset Blvd, Columbus, TX 87725\",\n            \"created_at\": \"2025-02-21T00:17:15.200501\",\n            \"email\": \"daniel.miller844@email.com\",\n            \"id\": 26,\n            \"is_admin\": false,\n            \"name\": \"Daniel Miller\",\n            \"phone\": \"555-7245\"\n        },\n        {\n            \"address\": \"727 Sunset Blvd, Chicago, NY 10306\",\n            \"created_at\": \"2025-07-14T00:17:15.200501\",\n            \"email\": \"jane.hernandez121@email.com\",\n            \"id\": 27,\n            \"is_admin\": false,\n            \"name\": \"Jane Hernandez\",\n            \"phone\": \"555-6263\"\n        },\n        {\n            \"address\": \"742 Maple Dr, San Jose, NY 70312\",\n            \"created_at\": \"2025-08-18T00:17:15.200501\",\n            \"email\": \"michael.jones953@email.com\",\n            \"id\": 28,\n            \"is_admin\": false,\n            \"name\": \"Michael Jones\",\n            \"phone\": \"555-9299\"\n        },\n        {\n            \"address\": \"425 Oak Ave, San Antonio, NY 49808\",\n            \"created_at\": \"2024-12-14T00:17:15.200501\",\n            \"email\": \"sarah.rodriguez156@email.com\",\n            \"id\": 29,\n            \"is_admin\": false,\n            \"name\": \"Sarah Rodriguez\",\n            \"phone\": \"555-4683\"\n        },\n        {\n            \"address\": \"505 Maple Dr, Charlotte, FL 47748\",\n            \"created_at\": \"2025-06-29T00:17:15.200501\",\n            \"email\": \"amelia.hernandez949@email.com\",\n            \"id\": 30,\n            \"is_admin\": false,\n            \"name\": \"Amelia Hernandez\",\n            \"phone\": \"555-4230\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T01:13:39.086805\",\n            \"email\": \"test@example.com\",\n            \"id\": 31,\n            \"is_admin\": false,\n            \"name\": \"Test User\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:43:14.939008\",\n            \"email\": \"test@gmail.com\",\n            \"id\": 33,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:43:20.491427\",\n            \"email\": \"test2@gmail.com\",\n            \"id\": 34,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T02:44:42.360990\",\n            \"email\": \"test_tponkxwl@gmail.com\",\n            \"id\": 35,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T03:46:37.478699\",\n            \"email\": \"test_wcagsrhl@gmail.com\",\n            \"id\": 36,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:43:14.160298\",\n            \"email\": \"test_t77lew81@gmail.com\",\n            \"id\": 38,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:43:21.401070\",\n            \"email\": \"test_t0nucd6j@gmail.com\",\n            \"id\": 39,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T20:47:00.334277\",\n            \"email\": \"admin@test.com\",\n            \"id\": 40,\n            \"is_admin\": true,\n            \"name\": \"admin\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:33.930357\",\n            \"email\": \"test_20lz9mom@gmail.com\",\n            \"id\": 41,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:35.208614\",\n            \"email\": \"test_8d06l09p@gmail.com\",\n            \"id\": 42,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:36.567746\",\n            \"email\": \"test_9twko3ns@gmail.com\",\n            \"id\": 43,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:37.742293\",\n            \"email\": \"test_lejjqqas@gmail.com\",\n            \"id\": 44,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:38.823554\",\n            \"email\": \"test_n1gr1sbg@gmail.com\",\n            \"id\": 45,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:39.997709\",\n            \"email\": \"test_7y5tias4@gmail.com\",\n            \"id\": 46,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:41.069688\",\n            \"email\": \"test_2k0ggxnh@gmail.com\",\n            \"id\": 47,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:42.408078\",\n            \"email\": \"test_t0k5cixb@gmail.com\",\n            \"id\": 48,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:00:43.456032\",\n            \"email\": \"test_vr5pvdiy@gmail.com\",\n            \"id\": 49,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-14T21:17:28.195341\",\n            \"email\": \"test_bpnmr6p6@gmail.com\",\n            \"id\": 50,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T13:57:22.404502\",\n            \"email\": \"test_ry34r5tq@gmail.com\",\n            \"id\": 51,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:16:38.427726\",\n            \"email\": \"test_08cuju91@gmail.com\",\n            \"id\": 52,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:52:33.008129\",\n            \"email\": \"test_m7bd65lm@gmail.com\",\n            \"id\": 53,\n            \"is_admin\": false,\n            \"name\": \"test\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T19:54:26.399497\",\n            \"email\": \"francine.howe@hotmail.com\",\n            \"id\": 54,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:04:29.753578\",\n            \"email\": \"gino.corkery@yahoo.com\",\n            \"id\": 55,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:05:41.207391\",\n            \"email\": \"edward.rowe@gmail.com\",\n            \"id\": 56,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        },\n        {\n            \"address\": \"\",\n            \"created_at\": \"2025-10-15T20:06:05.917785\",\n            \"email\": \"kenyetta.hirthe@hotmail.com\",\n            \"id\": 57,\n            \"is_admin\": false,\n            \"name\": \"\",\n            \"phone\": \"\"\n        }\n    ],\n    \"success\": true\n}\n\n ```"
					},
					"response": []
				},
				{
					"name": "List Products [Pre-Conditon2]",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get All Products\r",
									"pm.test(\"Status code is 200 : Get All Products\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Products listed successfully\", function () {\r",
									"        if (!jsonValid) pm.expect.fail(\"Expected JSON body for 200 response, but parsing failed\");\r",
									"\r",
									"        // success key\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"\r",
									"        // data array\r",
									"        pm.expect(responseData).to.have.property(\"data\").that.is.an(\"array\");\r",
									"        let arr = responseData.data;\r",
									"\r",
									"        // pagination object\r",
									"        pm.expect(responseData).to.have.property(\"pagination\").that.is.an(\"object\");\r",
									"        let p = responseData.pagination;\r",
									"\r",
									"        pm.expect(p).to.have.property(\"page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"pages\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"per_page\").that.is.a(\"number\");\r",
									"        pm.expect(p).to.have.property(\"total\").that.is.a(\"number\");\r",
									"\r",
									"        // Check at least one product item (if list not empty)\r",
									"        if (arr.length > 0) {\r",
									"           // let item = arr[0];\r",
									"   let item = arr[arr.length - 1];   //  last product, not first\r",
									"            pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"name\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"price\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"stock\").that.is.a(\"number\");\r",
									"            pm.expect(item).to.have.property(\"category\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"            pm.expect(item).to.have.property(\"image_url\").that.is.a(\"string\").and.not.empty;\r",
									"            pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"            // updated_at might be missing on some items, so check only if present\r",
									"            // exist only in the first product\r",
									"            if (item.hasOwnProperty(\"updated_at\")) {\r",
									"                pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"            }\r",
									"\r",
									"    \r",
									"      // Save the product_id for later use\r",
									"        pm.collectionVariables.set(\"product_id\", item.id);\r",
									"        console.log(\"Saved product_id(last item):\", item.id);\r",
									"        }\r",
									"    });\r",
									"}\r",
									"\r",
									"// Unexpected status if api go sleep :D\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add to Wishlist",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 or 400 or 404 : Add to Wishlist\r",
									"pm.test(\"Status code is 201 or 400 or 404 : Add to Wishlist\", function () {\r",
									"    pm.expect([201, 400, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return; // stop further tests if JSON invalid\r",
									"\r",
									"// 201 Created: product added to wishlist\r",
									"if (pm.response.code === 201) {\r",
									"    pm.test(\"201 Created: Product added to wishlist successfully\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", true);\r",
									"        pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData.message).to.eql(\"Product added to wishlist successfully\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// 400 Bad Request: already in wishlist\r",
									"else if (pm.response.code === 400) {\r",
									"    pm.test(\"400 Bad Request: Product already in wishlist\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(responseData.error).to.eql(\"Product already in wishlist\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// 404 Not Found: product not found\r",
									"else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Product not found\", function () {\r",
									"        pm.expect(responseData).to.have.property(\"success\", false);\r",
									"        pm.expect(responseData).to.have.property(\"error\", \"Product not found\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// fallback (shouldn't happen)\r",
									"else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_id\": {{user_id}},\n    \"product_id\": {{product_id}}\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/wishlist",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wishlist"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Wishlist",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Wishlist\r",
									"pm.test(\"Status code is 200 : Get Wishlist\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count is number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// data is array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate wishlist items\r",
									"pm.test(\"Wishlist items have required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"product_id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\");\r",
									"\r",
									"        // product object (simple check if present)\r",
									"        if (item.product) {\r",
									"            pm.expect(item.product).to.have.property(\"id\");\r",
									"            pm.expect(item.product).to.have.property(\"name\");\r",
									"            pm.expect(item.product).to.have.property(\"price\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									"\r",
									"// Save last wishlist item id\r",
									"let arr = res.data;\r",
									"let lastWishlistId = Array.isArray(arr) && arr.length > 0 ? arr[arr.length - 1].id : undefined;\r",
									"\r",
									"if (lastWishlistId !== undefined) {\r",
									"    pm.collectionVariables.set(\"wishlist_item_id\", lastWishlistId);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wishlist",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wishlist"
							]
						}
					},
					"response": []
				},
				{
					"name": "Remove Wishlist Item",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 or 404 : Remove from Wishlist\r",
									"pm.test(\"Status code is 200 or 404 : Remove from Wishlist\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// Handle 200 OK\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Product removed from wishlist successfully\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", true);\r",
									"        pm.expect(res).to.have.property(\"message\").that.is.a(\"string\");\r",
									"    });\r",
									"}\r",
									"\r",
									"// Handle 404 Not Found\r",
									"if (pm.response.code === 404) {\r",
									"    pm.test(\"404 Not Found: Wishlist item missing\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", false);\r",
									"        pm.expect(res).to.have.property(\"error\").that.is.a(\"string\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/wishlist/{{wishlist_item_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wishlist",
								"{{wishlist_item_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Coupons",
			"item": [
				{
					"name": "Create Coupon (Admin)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generate a random email address\r",
									"let randomString = Math.random().toString(36).substring(2, 10);\r",
									"let randomCode = `${randomString}10`;\r",
									"\r",
									"// Store the email in collection variables\r",
									"pm.collectionVariables.set(\"code\", randomCode);\r",
									"console.log(\"Saved coupon_id:\", randomCode, \"coupon_code:\", randomCode);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 : Create Coupon (Admin)\r",
									"pm.test(\"Status code is 201 : Create Coupon (Admin)\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let responseData = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    responseData = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// 201 OK validations\r",
									"pm.test(\"201 Created: Coupon created successfully and payload is valid\", function () {\r",
									"    pm.expect(responseData).to.have.property(\"success\", true);\r",
									"    pm.expect(responseData).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(responseData.message).to.eql(\"Coupon created successfully\");\r",
									"\r",
									"    // data object\r",
									"    pm.expect(responseData).to.have.property(\"data\").that.is.an(\"object\");\r",
									"    let d = responseData.data;\r",
									"\r",
									"    // required fields checks (simple and clear)\r",
									"    pm.expect(d).to.have.property(\"id\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"code\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"    pm.expect(d).to.have.property(\"discount_type\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"discount_value\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"min_order_amount\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"max_discount\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"usage_limit\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"used_count\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"is_active\").that.is.a(\"boolean\");\r",
									"    pm.expect(d).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"expires_at\").that.is.a(\"string\").and.not.empty;\r",
									"\r",
									"// in pre-request\r",
									"    // Save coupon id and code for later use\r",
									"  //  pm.collectionVariables.set(\"coupon_id\", d.id);\r",
									"    //pm.collectionVariables.set(\"coupon_code\", d.code);\r",
									"    //console.log(\"Saved coupon_id:\", d.id, \"coupon_code:\", d.code);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"{{code}}\",\n    \"description\": \"10% off first order\",\n    \"discount_type\": \"percentage\",\n    \"discount_value\": 10,\n    \"min_order_amount\": 50,\n    \"max_discount\": 30,\n    \"usage_limit\": 100\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/coupons",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"coupons"
							]
						}
					},
					"response": []
				},
				{
					"name": "Validate Coupon",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Validate Coupon\r",
									"pm.test(\"Status code is 200 : Validate Coupon\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// data object validation\r",
									"pm.test(\"Data object contains required coupon validation fields\", function () {\r",
									"    pm.expect(res).to.have.property(\"data\").that.is.an(\"object\");\r",
									"\r",
									"    let d = res.data;\r",
									"\r",
									"    pm.expect(d).to.have.property(\"coupon_id\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"code\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"description\").that.is.a(\"string\");\r",
									"    pm.expect(d).to.have.property(\"discount_type\").that.is.a(\"string\").and.not.empty;\r",
									"    pm.expect(d).to.have.property(\"discount_amount\").that.is.a(\"number\");\r",
									"    pm.expect(d).to.have.property(\"final_amount\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// Optional: Check that final_amount = order_amount - discount_amount\r",
									"pm.test(\"Final amount is correctly calculated\", function () {\r",
									"    let d = res.data;\r",
									"    let expectedFinal = (d.order_amount ?? 120) - d.discount_amount;\r",
									"    pm.expect(d.final_amount).to.eql(expectedFinal);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"{{code}}\",\n    \"order_amount\": 120.0\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/coupons/validate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"coupons",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Coupons",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status Code\r",
									"pm.test(\"Status code is 200 : List Coupons\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count is number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// data is array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each coupon item\r",
									"pm.test(\"Each coupon has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"code\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"description\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"discount_type\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"discount_value\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"min_order_amount\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"max_discount\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"usage_limit\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"used_count\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"is_active\").that.is.a(\"boolean\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"expires_at\").that.is.a(\"string\");\r",
									"    });\r",
									"});\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{admin_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/coupons",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"coupons"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "create random notifications",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 201 : List Notifications\r",
									"pm.test(\"Status code is 201 : create random test notifications\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(201);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count and unread_count are numbers\r",
									"pm.test(\"Countis number\", function () {\r",
									"    pm.expect(res).to.have.property(\"count\").that.is.a(\"number\");\r",
									"});\r",
									"\r",
									"// data is array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res).to.have.property(\"data\").that.is.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each notification item\r",
									"pm.test(\"Each notification has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"body\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"title\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"is_read\").that.is.a(\"boolean\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        // read_at may exist only if is_read true  check only if present\r",
									"\r",
									"    });\r",
									"});\r",
									"\r",
									"// Save last notification id to collection variable\r",
									"let arr = Array.isArray(res.data) ? res.data : [];\r",
									"let lastNotificationId = arr.length > 0 ? arr[arr.length - 1].id : undefined;\r",
									"if (lastNotificationId !== undefined) {\r",
									"    pm.collectionVariables.set(\"notification_id\", lastNotificationId);\r",
									"    console.log(\"Saved notification_id:\", lastNotificationId);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"count\":3\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/notifications/test-create",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"test-create"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Notifications",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : List Notifications\r",
									"pm.test(\"Status code is 200 : List Notifications\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count and unread_count are numbers\r",
									"pm.test(\"Count and unread_count are numbers\", function () {\r",
									"    pm.expect(res).to.have.property(\"count\").that.is.a(\"number\");\r",
									"    if (res.hasOwnProperty(\"unread_count\")) {\r",
									"        pm.expect(res.unread_count).to.be.a(\"number\");\r",
									"    }\r",
									"});\r",
									"\r",
									"// data is array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res).to.have.property(\"data\").that.is.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each notification item\r",
									"pm.test(\"Each notification has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"title\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"type\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"user_id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"is_read\").that.is.a(\"boolean\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        // read_at may exist only if is_read true  check only if present\r",
									"        if (item.hasOwnProperty(\"read_at\")) {\r",
									"            pm.expect(item.read_at).to.be.a(\"string\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									"\r",
									"// unread_count matches items with is_read === false\r",
									"if (res.hasOwnProperty(\"unread_count\")) {\r",
									"    pm.test(\"unread_count matches actual unread items\", function () {\r",
									"        let unread = res.data.filter(n => n.is_read === false).length;\r",
									"        pm.expect(res.unread_count).to.eql(unread);\r",
									"    });\r",
									"}\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/notifications",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mark Notification Read",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Mark Notification Read\r",
									"pm.test(\"Status code is 200 : Mark Notification Read\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON safely\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// 200 case: check success and message\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"200 OK: Notification marked as read\", function () {\r",
									"        pm.expect(res).to.have.property(\"success\", true);\r",
									"        pm.expect(res).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(res.message).to.eql(\"Notification marked as read\");\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"Unexpected status code\", function () {\r",
									"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{base_url}}/notifications/{{notification_id}}/read",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"{{notification_id}}",
								"read"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mark All Notifications Read",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"notification_id\", \"2\"); // Replace with the actual notification ID"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200\r",
									"pm.test(\"Status code is 200 : Mark All Notifications Read\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse JSON safely\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// message exists and is string\r",
									"pm.test(\"Message exists\", function () {\r",
									"    pm.expect(res).to.have.property(\"message\").that.is.a(\"string\").and.not.empty;\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{user_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{base_url}}/notifications/read-all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"read-all"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Search & Recommendations",
			"item": [
				{
					"name": "Advanced Search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code check\r",
									"pm.test(\"Status is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// count should be a number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// data should be array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate product items (if exist)\r",
									"pm.test(\"Product fields valid\", function () {\r",
									"    if (res.data.length > 0) {\r",
									"        let item = res.data[0];\r",
									"\r",
									"        pm.expect(item).to.have.property(\"id\");\r",
									"        pm.expect(item).to.have.property(\"name\");\r",
									"        pm.expect(item).to.have.property(\"price\");\r",
									"        pm.expect(item).to.have.property(\"category\");\r",
									"        pm.expect(item).to.have.property(\"description\");\r",
									"        pm.expect(item).to.have.property(\"image_url\");\r",
									"        pm.expect(item).to.have.property(\"created_at\");\r",
									"\r",
									"        if (item.hasOwnProperty(\"updated_at\")) {\r",
									"            pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"        }\r",
									"    }\r",
									"});\r",
									"\r",
									"// Filters applied check\r",
									"pm.test(\"Filters applied exist\", function () {\r",
									"    pm.expect(res).to.have.property(\"filters_applied\").that.is.an(\"object\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"packages": {},
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/search/advanced?q=mouse&category=Electronics&min_price=1&max_price=500&min_rating=4&sort_by=price&sort_order=asc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search",
								"advanced"
							],
							"query": [
								{
									"key": "q",
									"value": "mouse"
								},
								{
									"key": "category",
									"value": "Electronics"
								},
								{
									"key": "min_price",
									"value": "1"
								},
								{
									"key": "max_price",
									"value": "500"
								},
								{
									"key": "min_rating",
									"value": "4"
								},
								{
									"key": "sort_by",
									"value": "price"
								},
								{
									"key": "sort_order",
									"value": "asc"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Product Recommendations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code check\r",
									"pm.test(\"Status is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Valid JSON response\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// Success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// Count is a number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// Data is an array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate recommended product fields\r",
									"pm.test(\"Each recommended product has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\");\r",
									"        pm.expect(item).to.have.property(\"name\");\r",
									"        pm.expect(item).to.have.property(\"price\");\r",
									"        pm.expect(item).to.have.property(\"category\");\r",
									"        pm.expect(item).to.have.property(\"description\");\r",
									"        pm.expect(item).to.have.property(\"image_url\");\r",
									"        pm.expect(item).to.have.property(\"created_at\");\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"packages": {},
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/recommendations/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recommendations",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "User Recommendations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code check\r",
									"pm.test(\"Status is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Valid JSON response\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// Success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// Count must be a number\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// Data is an array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate recommended product fields\r",
									"pm.test(\"Each recommended product has required fields\", function () {\r",
									"    res.data.forEach(item => {\r",
									"        pm.expect(item).to.have.property(\"id\");\r",
									"        pm.expect(item).to.have.property(\"name\");\r",
									"        pm.expect(item).to.have.property(\"price\");\r",
									"        pm.expect(item).to.have.property(\"category\");\r",
									"        pm.expect(item).to.have.property(\"description\");\r",
									"        pm.expect(item).to.have.property(\"image_url\");\r",
									"        pm.expect(item).to.have.property(\"created_at\");\r",
									"\r",
									"        // updated_at \r",
									"        if (item.updated_at !== undefined) {\r",
									"            pm.expect(item.updated_at).to.be.a(\"string\");\r",
									"        }\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/recommendations/user/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recommendations",
								"user",
								"{{user_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Blog",
			"item": [
				{
					"name": "List Blog Posts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code check\r",
									"pm.test(\"Status is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Validate JSON\r",
									"let res = {};\r",
									"let valid = true;\r",
									"\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    valid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(valid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!valid) return;\r",
									"\r",
									"// Success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res.success).to.eql(true);\r",
									"});\r",
									"\r",
									"// Count check\r",
									"pm.test(\"Count is a number\", function () {\r",
									"    pm.expect(res.count).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"// Data is an array\r",
									"pm.test(\"Data is an array\", function () {\r",
									"    pm.expect(res.data).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Validate each post item\r",
									"pm.test(\"Each blog post has required properties\", function () {\r",
									"    res.data.forEach(post => {\r",
									"        pm.expect(post).to.have.property(\"id\");\r",
									"        pm.expect(post).to.have.property(\"title\");\r",
									"        pm.expect(post).to.have.property(\"author\");\r",
									"        pm.expect(post).to.have.property(\"excerpt\");\r",
									"        pm.expect(post).to.have.property(\"content\");\r",
									"        pm.expect(post).to.have.property(\"status\");\r",
									"        pm.expect(post).to.have.property(\"featured_image\");\r",
									"        pm.expect(post).to.have.property(\"tags\");\r",
									"        pm.expect(post).to.have.property(\"views\");\r",
									"        pm.expect(post).to.have.property(\"created_at\");\r",
									"        pm.expect(post).to.have.property(\"updated_at\");\r",
									"    });\r",
									"});\r",
									"\r",
									"// Save last blog post ID\r",
									"let dataArr = res.data;\r",
									"let blogpostid = Array.isArray(dataArr) && dataArr.length > 0 \r",
									"    ? dataArr[dataArr.length - 1].id \r",
									"    : undefined;\r",
									"\r",
									"if (blogpostid !== undefined) {\r",
									"    pm.collectionVariables.set(\"blog_post_id\", blogpostid);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/blog/posts?status=published",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"blog",
								"posts"
							],
							"query": [
								{
									"key": "status",
									"value": "published"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Blog Post",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"blog_post_id\", \"2\"); // Example blog post ID"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Status code must be 200 : Get Blog Post\r",
									"pm.test(\"Status code is 200 : Get Blog Post\", function () {\r",
									"    pm.expect(pm.response.code).to.eql(200);\r",
									"});\r",
									"\r",
									"// Parse response JSON\r",
									"let res = {};\r",
									"let jsonValid = true;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    jsonValid = false;\r",
									"}\r",
									"\r",
									"pm.test(\"Response is valid JSON\", function () {\r",
									"    pm.expect(jsonValid).to.be.true;\r",
									"});\r",
									"\r",
									"if (!jsonValid) return;\r",
									"\r",
									"// Success flag\r",
									"pm.test(\"Success flag is true\", function () {\r",
									"    pm.expect(res).to.have.property(\"success\", true);\r",
									"});\r",
									"\r",
									"// Data must be an object\r",
									"pm.test(\"Data is an object\", function () {\r",
									"    pm.expect(res).to.have.property(\"data\").that.is.an(\"object\");\r",
									"});\r",
									"\r",
									"if (res.data) {\r",
									"    let item = res.data;\r",
									"\r",
									"    pm.test(\"Blog post has required properties and types\", function () {\r",
									"        pm.expect(item).to.have.property(\"id\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"title\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"author\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"excerpt\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"content\").that.is.a(\"string\");\r",
									"        pm.expect(item).to.have.property(\"status\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"featured_image\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"tags\").that.is.an(\"array\");\r",
									"        pm.expect(item).to.have.property(\"views\").that.is.a(\"number\");\r",
									"        pm.expect(item).to.have.property(\"created_at\").that.is.a(\"string\").and.not.empty;\r",
									"        pm.expect(item).to.have.property(\"updated_at\").that.is.a(\"string\").and.not.empty;\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/blog/posts/{{blog_post_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"blog",
								"posts",
								"{{blog_post_id}}"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{admin_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5000/api"
		},
		{
			"key": "admin_token",
			"value": ""
		},
		{
			"key": "user_token",
			"value": ""
		},
		{
			"key": "user_id",
			"value": ""
		},
		{
			"key": "product_id",
			"value": ""
		},
		{
			"key": "help_id",
			"value": ""
		},
		{
			"key": "contact_message_id",
			"value": ""
		},
		{
			"key": "wishlist_item_id",
			"value": ""
		},
		{
			"key": "notification_id",
			"value": ""
		},
		{
			"key": "blog_post_id",
			"value": ""
		},
		{
			"key": "email",
			"value": ""
		},
		{
			"key": "firstorder",
			"value": ""
		},
		{
			"key": "code",
			"value": ""
		},
		{
			"key": "category_id",
			"value": ""
		},
		{
			"key": "refresh_token",
			"value": ""
		},
		{
			"key": "like_id",
			"value": ""
		},
		{
			"key": "category",
			"value": ""
		},
		{
			"key": "categories",
			"value": ""
		},
		{
			"key": "cart_item_id",
			"value": ""
		},
		{
			"key": "order_id",
			"value": ""
		},
		{
			"key": "notifications_marked_count",
			"value": ""
		},
		{
			"key": "read_all_message",
			"value": ""
		},
		{
			"key": "review_id",
			"value": ""
		},
		{
			"key": "refresh_admin_token",
			"value": ""
		}
	]
}